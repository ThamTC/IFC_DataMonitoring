(function(){"use strict";var e={513:function(e,t,a){var s=a(1406),i=a(3907),n={user:{},isLoggin:!1,currentData:{},managerUser:{},managerUsers:[],usersLogin:[],permissions:[],permissionDetails:[],roles:[]},l={checkLoggin(e){return e.isLoggin},getUser(e){return e.user},getLoginName(e){return e.user?.username},getManagerUserInfo(e){return e.managerUser},getManagerRole(e){return e.managerUser.role},getManagerUsername(e){return e.managerUser.username},getManagerUsers(e){return e.managerUsers},getUsersLogin(e){return e.usersLogin},getPermissions(e){return e.permissions},getPermissionDetails(e){return e.permissionDetails},getRoles(e){return e.roles}},r={setIsLoggin(e,t){e.isLoggin=t},setUser(e,t){e.user=t,e.isLoggin=!0},setManagerUserInfo(e,t){e.managerUser=t},setManagerRole(e,t){e.managerUser.role=t},setManagerUsername(e,t){e.managerUser.username=t},setManagerUsers(e,t){e.managerUsers=t},setUsersLogin(e,t){e.usersLogin=t},setPermissions(e,t){e.permissions=t},setRoles(e,t){e.roles=t},insertRole(e,t){e.roles.push(t)},setPermissionDetails(e,t){e.permissionDetails=t},insertPermission(e,t){e.permissions.push(t)},updatePermissionOfUser:(e,t)=>{e.user.permissions=t}},o=a(9669),d=a.n(o);d().defaults.withCredentials=!0,d().defaults.timeout=1e4;var c=d().create({baseURL:"/"}),u=a(6245),m={signin:async({commit:e,state:t},a)=>{try{const t=await c.post("api/auth/login",a),s=(0,u.Z)(t.data.accessToken);return e("setUser",s),e("setIsLoggin",!0),localStorage.setItem("accessToken",JSON.stringify(t.data.accessToken)),s}catch(s){throw s}},signout:async({commit:e,state:t})=>{try{const e=localStorage.getItem("accessToken"),t=JSON.parse(e),a=await c.post("api/auth/logout",{accessToken:t});return localStorage.clear(),a.data}catch(a){throw a}},updateManagerUsers:({commit:e,state:t},a)=>{const s=t.managerUsers.map((e=>e.email!==a.email?e:a));e("setManagerUsers",s)},deleteUserFromManager:({commit:e,state:t},a)=>{const s=t.managerUsers.filter((e=>e.id!=a));e("setManagerUsers",s),e("setManagerUserInfo",{})},deleteRolesManager:({commit:e,state:t},a)=>{const s=t.roles.filter((e=>e.name!=a));e("setRoles",s)},deleteRoleManager:({commit:e,state:t},a)=>{const s=t.roles.filter((e=>e.id!=a));e("setRoles",s)},updateRoles({commit:e,state:t},a){const s=t.managerUsers;s[a.eleId]["role"]=a.roleName,console.log(a.roleName)},updatePermissionDetails({commit:e,state:t},a){const s=t.roles,i=t.permissionDetails;s.forEach(((e,t)=>{e.name==a.name&&(i[t]=a.data)})),e("setPermissionDetails",i)},insertPermissionDetails({commit:e,state:t},a){const s=t.permissionDetails;s.push(a),e("setPermissionDetails",s)},getPermissionOfUser:async({commit:e,state:t},a)=>{try{const e=await c.get(`api/db/role/${a}`);return e}catch(s){throw s}}},h={state:n,getters:l,mutations:r,actions:m},g={dataRealtime:[],dataRealtimeFilter:[],countColors:{},currentData:{},solarRealtime:[],solarRealtimeFilter:[],countColorSolars:{},currentSolar:{},bmbRealtime:[],bmbRealtimeFilter:[],countColorBmbs:{},currentBmb:{}};function p(e){return e&&0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}var b={getDataRealtime(e){return e.dataRealtime},getCurrentData(e){return e.currentData},getDataRealtimeFilter(e){return e.dataRealtimeFilter},getCountColors(e){return e.countColors},getSolarRealtime(e){return e.solarRealtime},getCurrentSolar(e){const t=e.currentSolar;return p(t)?{color:"",message:""}:e.currentSolar},getSolarRealtimeFilter(e){return e.solarRealtimeFilter},getCountColorSolars(e){return e.countColorSolars},getBmbRealtime(e){return e.bmbRealtime},getCurrentBmb(e){const t=e.currentBmb;return p(t)?{color:"",message:""}:e.currentBmb},getBmbRealtimeFilter(e){return e.bmbRealtimeFilter},getCountColorBmbs(e){return e.countColorBmbs}};var v={setDataRealtime(e,t){switch(t.key){case"realtime":e.dataRealtime=t.data;break;case"bmb_realtime":e.bmbRealtime=t.data;break;case"solar_realtime":e.solarRealtime=t.data;break;default:break}},insertDataRealtime(e,t,a){switch(t){case"realtime":e.dataRealtime.unshift(a);break;case"bmb_realtime":e.bmbRealtime.unshift(a);break;case"solar_realtime":e.solarRealtime.unshift(a);break;default:break}},setCountColors(e,t){switch(t.key){case"realtime":e.countColors=t.data;break;case"bmb_realtime":e.countColorBmbs=t.data;break;case"solar_realtime":e.countColorSolars=t.data;break;default:break}},setCurrentData(e,t){switch(t.key){case"realtime":e.currentData=t.data;break;case"bmb_realtime":e.currentBmb=t.data;break;case"solar_realtime":e.currentSolar=t.data;break;default:break}},setDataRealtimeFilter(e,t){switch(t.key){case"realtime":e.dataRealtimeFilter=t.data;break;case"bmb_realtime":e.bmbRealtimeFilter=t.data;break;case"solar_realtime":e.solarRealtimeFilter=t.data;break;default:break}}};const _=["dark","red","orange","yellow","green","blue","cyan","violet","white"],f=["null","Read","Write"],w={idToColor:e=>{const t=_.findIndex(((t,a)=>a==e));return t>=0?_[e]:"black"},colorToId:e=>{const t=_.findIndex((t=>t==e));return t},idToName:e=>{const t=f.findIndex(((t,a)=>a==e));return f[t]},convertPermissionUser:(e,t)=>{let a=[];return a=e.map((e=>{const a=t.find((t=>t.id==e.name));if(a)return{id:a.id,name:a.name,value:e.value}})),a}};var y=w,D={getRealtimeStore:async({commit:e,state:t},a)=>{try{const e=await c.post("/api/redis/index",{key:a});return e.data}catch(s){return s.response}},counterColorStore:({commit:e,state:t},a)=>{var s;switch(a){case"realtime":s=t.dataRealtime;break;case"bmb_realtime":s=t.bmbRealtime;break;case"solar_realtime":s=t.solarRealtime;break;default:break}var i={};s.forEach((e=>{const t=y.idToColor(e.priority);i[t]=(i[t]||0)+1})),e("setCountColors",{key:a,data:Object.entries(i)})},realtimeStore:({commit:e,state:t},a)=>{var s;switch(a.key){case"realtime":s=t.dataRealtime;break;case"bmb_realtime":s=t.bmbRealtime;break;case"solar_realtime":s=t.solarRealtime;break;default:break}s.unshift(a.data),e("setDataRealtime",{key:a.key,data:s})},currentDataStore:({commit:e,state:t},a)=>{const s=(a.data.type??"")+" "+(a.data.system??"")+" "+(a.data.parameter??""),i=y.idToColor(a.data.priority);e("setCurrentData",{key:a.key,data:{msg:s,color:i}})}},k={state:g,getters:b,mutations:v,actions:D},S={dataStatistic:[],solarStatistic:[]},U={getDataStatistic(e){return e.dataStatistic},getSolarStatistic(e){return e.solarStatistic}},R={setDataStatistic(e,t){switch(t.key){case"statistic":e.dataStatistic=t.data;break;case"solar_statistic":e.solarStatistic=t.data;break;default:break}},insertDataStatistic(e,t){e.dataStatistic.unshift(t)}},M={getStatisticStore:async({commit:e,state:t},a)=>{try{const t=await c.post("/api/redis/index",{key:a});return e("setDataStatistic",{key:a,data:t.data}),t.data}catch(s){return s.response}},selectTask:async({commit:e,state:t},{e:a,checkerName:s,key:i})=>{try{const t=await c.post("api/redis/update",{id:a.target.value,isAction:a.target.checked,username:a.target.checked?s:"",key:i});return e("setDataStatistic",{key:i,data:t.data}),t.data}catch(n){return n.response}}},P={state:S,getters:U,mutations:R,actions:M},C={sideNavMenu:""},x={getSideNavMenu(e){return e.sideNavMenu}},I={setSideNavMenu(e,t){e.sideNavMenu=t}},N={},A={state:C,getters:x,mutations:I,actions:N},L={issues:[],descriptions:[]},T={getIssues(e){return e.issues},getDescriptions(e){return e.descriptions}},E={setIssues(e,t){e.issues=t},insertIssue(e,t){e.issues.push(t)},setDescriptions(e,t){e.descriptions=t},insertDescription(e,t){e.descriptions.push(t)}},F={async getAllIssue(e,t){try{const e=await c.get("api/db/issues",{params:{status:t.where.status,assignee:t.where.assignee,startDate:t.where.startDate,endDate:t.where.endDate,offset:t.offset,limit:t.limit}});return e}catch(a){throw a.response}},async getCounterIssue(e,t){try{const e=await c.get("api/db/issues/counter",{params:t});return e}catch(a){throw a.response}},async indexDescription(e,t){try{const e=await c.get("api/db/issues/description",{params:{issueId:t}});return e}catch(a){throw a.response}},async createDescription(e,t){try{const e=await c.post("api/db/issues/description",{payload:t});return e}catch(a){throw a.response}}},B={state:L,getters:T,mutations:E,actions:F};const O=new i.ZP.Store({modules:{auth:h,realtime:k,statistics:P,sideNavMenu:A,redmine:B},state:{},mutations:{},getters:{},actions:{}});var W=O,q=a(3648);const z=(0,q._)("div",{id:"myToast"},null,-1);function Z(e,t,a,s,i,n){const l=(0,q.up)("router-view");return(0,q.wg)(),(0,q.iD)("div",null,[(0,q.Wm)(l,{name:"navbar"}),(0,q.Wm)(l),z])}const V={class:"sb-topnav navbar navbar-expand navbar-dark bg-dark"},j=(0,q._)("i",{class:"fas fa-home me-2"},null,-1),$=(0,q.Uk)("IFC"),H=(0,q._)("i",{class:"fas fa-bars"},null,-1),K=[H],Y={class:"d-none d-md-inline-block form-inline ms-auto me-0 me-md-3 my-2 my-md-0"},G={key:0,class:"input-group"},J=(0,q._)("input",{class:"form-control",type:"text",placeholder:"Search for...","aria-label":"Search for...","aria-describedby":"btnNavbarSearch"},null,-1),X=(0,q._)("button",{class:"btn btn-primary",id:"btnNavbarSearch",type:"button"},[(0,q._)("i",{class:"fas fa-search"})],-1),Q=[J,X],ee={class:"navbar-nav ms-auto ms-md-0 me-3 me-lg-4 navbar-expand"},te=(0,q.Uk)(" Login "),ae=(0,q.Uk)(" Register "),se={class:"noti-icon px-3"},ie={class:"nav-item dropdown"},ne=(0,q._)("img",{src:"https://mdbcdn.b-cdn.net/img/new/avatars/2.webp",class:"rounded-circle",style:{width:"30px"},alt:"Avatar"},null,-1),le={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"navbarDropdown"},re=(0,q.Uk)("Settings"),oe=(0,q._)("li",null,[(0,q._)("a",{class:"dropdown-item",href:"#!"},"Activity Log")],-1),de=(0,q._)("li",null,[(0,q._)("hr",{class:"dropdown-divider"})],-1);function ce(e,t,a,i,n,l){const r=(0,q.up)("router-link"),o=(0,q.up)("NotiIcon"),d=(0,q.up)("OnlineIcon");return(0,q.wg)(),(0,q.iD)("nav",V,[(0,q.Wm)(r,{tag:"a",class:"navbar-brand ps-3",to:"/"},{default:(0,q.w5)((()=>[j,$])),_:1}),l.isLoggin?((0,q.wg)(),(0,q.iD)("button",{key:0,class:"btn btn-link btn-sm order-1 order-lg-0 me-4 me-lg-0",id:"sidebarToggle",onClick:t[0]||(t[0]=(...e)=>l.sidebarToggle&&l.sidebarToggle(...e))},K)):(0,q.kq)("",!0),(0,q._)("form",Y,[l.isLoggin?((0,q.wg)(),(0,q.iD)("div",G,Q)):(0,q.kq)("",!0)]),l.canShow?((0,q.wg)(),(0,q.j4)(o,{key:1})):(0,q.kq)("",!0),l.isLoggin?((0,q.wg)(),(0,q.j4)(d,{key:2})):(0,q.kq)("",!0),(0,q._)("ul",ee,[l.isLoggin?(0,q.kq)("",!0):((0,q.wg)(),(0,q.j4)(r,{key:0,class:"nav-link ps-4",to:"/login"},{default:(0,q.w5)((()=>[te])),_:1})),l.isLoggin?(0,q.kq)("",!0):((0,q.wg)(),(0,q.j4)(r,{key:1,class:"nav-link ps-4",to:"/register"},{default:(0,q.w5)((()=>[ae])),_:1})),(0,q.wy)((0,q._)("div",se,[(0,q._)("li",ie,[(0,q.Wm)(r,{class:"nav-link px-1",id:"navbarDropdown",to:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},{default:(0,q.w5)((()=>[ne])),_:1}),(0,q._)("ul",le,[(0,q._)("li",null,[(0,q.Wm)(r,{class:"dropdown-item",to:"/account"},{default:(0,q.w5)((()=>[re])),_:1})]),oe,de,(0,q._)("li",null,[(0,q._)("a",{class:"dropdown-item",href:"#",onClick:t[1]||(t[1]=(...e)=>l.logout&&l.logout(...e))},"Logout")])])])],512),[[s.F8,l.isLoggin]])])])}const ue={register:async e=>{try{await c.post("api/auth/register",e);return"success"}catch(t){throw t}},refreshToken:async()=>{try{const e=await c.post("api/auth/refresh",{withCredentials:!0});return localStorage.setItem("user",JSON.stringify(e.data)),e.data}catch(e){return e.response}},resetPassword:async e=>{try{const t=c.post("/api/auth/reset",{email:e});return t.data}catch(t){return t.response}},isLogged:async()=>{try{const e=await c.post("/api/auth/isLogged",{},{withCredentials:!0});return e}catch(e){return e.response}},changePassword:async(e,t,a)=>{try{const s=await c.post("/api/auth/changePassword",{email:e,oldPassword:t,newPassword:a});return s}catch(s){throw s}}};var me=ue;const he={class:"noti-icon px-2"},ge=(0,q._)("div",{class:"position-relative ringing-bell"},[(0,q._)("i",{class:"fas fa-bell noti circle-icon faa-ring animated animated-hover"}),(0,q._)("span",{class:"position-absolute top-1 start-100 translate-right badge rounded-pill bg-warning"},[(0,q.Uk)(" 0 "),(0,q._)("span",{class:"visually-hidden"},"unread messages")])],-1),pe=[ge];function be(e,t,a,s,i,n){return(0,q.wg)(),(0,q.iD)("div",he,pe)}var ve={},_e=a(8118);const fe=(0,_e.Z)(ve,[["render",be]]);var we=fe,ye=a(7495);const De={class:"noti-icon px-2"},ke={class:"position-relative"},Se={class:"dropdown"},Ue=(0,q._)("a",{id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,q._)("i",{class:"fas fa-users noti circle-icon"})],-1),Re={class:"position-absolute top-1 start-100 translate-right badge rounded-pill bg-warning"},Me=(0,q._)("span",{class:"visually-hidden"},"unread messages",-1),Pe={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},Ce={class:"dropdown-item",href:"#"};function xe(e,t,a,s,i,n){return(0,q.wg)(),(0,q.iD)("div",De,[(0,q._)("div",ke,[(0,q._)("div",Se,[Ue,(0,q._)("span",Re,[(0,q.Uk)((0,ye.zw)(n.usersLogin.length)+" ",1),Me]),(0,q._)("ul",Pe,[((0,q.wg)(!0),(0,q.iD)(q.HY,null,(0,q.Ko)(n.usersLogin,((e,t)=>((0,q.wg)(),(0,q.iD)("li",{key:t},[(0,q._)("a",Ce,(0,ye.zw)(n.isYour(e)),1)])))),128))])])])])}var Ie={name:"OnlineIcon",data(){return{username:""}},created(){this.username=this.getUser.username},computed:{...(0,i.Se)(["getUser","getUsersLogin"]),usersLogin(){const e=this.getUsersLogin;let t=e.filter((e=>e!==this.username));return t.unshift(this.username),t}},methods:{isYour(e){return e!==this.username?e:`You(${e})`}}};const Ne=(0,_e.Z)(Ie,[["render",xe]]);var Ae=Ne,Le={name:"NavBar",components:{NotiIcon:we,OnlineIcon:Ae},data(){return{}},computed:{...(0,i.Se)(["checkLoggin","getUser"]),canShow(){return this.checkLoggin&&"manager"===this.getUser.role},isLoggin(){return this.checkLoggin}},methods:{...(0,i.OI)(["setUser","setIsLoggin"]),...(0,i.nv)(["signout"]),logout(){this.signout().then((e=>{this.setUser({}),this.setIsLoggin(!1),this.$router.push({name:"dashboard"})})).catch((e=>{console.log(e)}))},sidebarToggle(){document.body.classList.toggle("sb-sidenav-toggled")}}};const Te=(0,_e.Z)(Le,[["render",ce]]);var Ee=Te;const Fe={class:"py-4 bg-light mt-auto"},Be=(0,q.uE)('<div class="container-fluid px-4"><div class="d-flex align-items-center justify-content-between small"><div class="text-muted">Copyright © IFC Website 2022</div><div><a href="#">Privacy Policy</a> · <a href="#">Terms &amp; Conditions</a></div></div></div>',1),Oe=[Be];function We(e,t,a,s,i,n){return(0,q.wg)(),(0,q.iD)("footer",Fe,Oe)}var qe={name:"Footer"};const ze=(0,_e.Z)(qe,[["render",We]]);var Ze=ze,Ve={getAllPermissions:async()=>{try{const e=await c.get("/api/db/permission");return e}catch(e){throw e}},createPermission:async e=>{try{const t=await c.post("/api/db/permission",{name:e});return t}catch(t){throw t}},delete:async e=>{try{const t=await c["delete"]("api/db/permission",{id:e});return t}catch(t){throw t}},updatePermission:async(e,t)=>{try{const a=await c.patch("api/db/permission",{userId:e,permission:t});return a}catch(a){throw a}}},je=a(1766),$e=new je.Howl({src:["../audios/elegant-notification-sound.mp3"],autoplay:!0,volume:1}),He=$e,Ke=a(2482);class Ye{}(0,Ke.Z)(Ye,"NONE",0),(0,Ke.Z)(Ye,"READ",1),(0,Ke.Z)(Ye,"WRITE",2);var Ge=Ye,Je=(e,t,a=Ge.NONE)=>{const s=W.getters.getPermissionDetails;let i=[];i=e?.permissions??[];let n=i.map((e=>{const t=s.find((t=>t.id==e.name));if(t)return{name:t.name,value:e.value}})),l=!1;return n=n.filter((e=>void 0!=e)),n.length>0&&t.forEach((e=>{const t=n.find((t=>t.name==e&&t.value>=a));if(t)return l=!0,!1})),l},Xe=({title:e="",message:t="",type:a="signin",duration:s=3e3})=>{const i=document.getElementById("myToast");if(i){const n=document.createElement("div"),l=setTimeout((function(){i.removeChild(n)}),s+1e3);n.onclick=function(e){e.target.closest(".toast__close")&&(i.removeChild(n),clearTimeout(l))};const r={signin:"fas fa-sign-in-alt",signout:"fas fa-sign-out-alt"},o=r[a],d=(s/1e3).toFixed(2);n.classList.add("myToast",`toast--${a}`),n.style.animation=`slideInLeft ease .3s, fadeOut linear 1s ${d}s forwards`,n.innerHTML=`\n            <div class="toast__icon toast__icon--${a}">\n                <i class="${o}"></i>\n            </div>\n            <div class="toast__body">\n                <h3 class="toast__title toast__title--${a}">${e}</h3>\n                <p class="toast__msg">${t}</p>\n            </div>\n            <div class="toast__close">\n                <i class="fas fa-times"></i>\n            </div>\n        `,i.appendChild(n)}};const Qe={bmb_realtime:function(e){const t=this.$store.getters.getUser,a=Je(t,["bmb_realtime"],Ge.READ);a&&(He.play(),this.$store.dispatch("currentDataStore",{key:"bmb_realtime",data:e}),this.$store.dispatch("realtimeStore",{key:"bmb_realtime",data:e}),this.$store.dispatch("counterColorStore","bmb_realtime"))},updateRealtimeBmb:function(e){null==e.error&&(0==e.data.length&&this.$store.commit("setCurrentData",{key:"bmb_realtime",data:{}}),this.$store.commit("setDataRealtime",{key:"bmb_realtime",data:e.data}),this.$store.dispatch("counterColorStore","bmb_realtime"))},realtime:function(e){const t=this.$store.getters.getUser,a=Je(t,["realtime"],Ge.READ);a&&(He.play(),this.$store.dispatch("currentDataStore",{key:"realtime",data:e}),this.$store.dispatch("realtimeStore",{key:"realtime",data:e}),this.$store.dispatch("counterColorStore","realtime"))},statistic:function(e){this.$store.commit("setDataStatistic",{key:"statistic",data:e})},updateRealtime:function(e){null==e.error&&(0==e.data.length&&this.$store.commit("setCurrentData",{key:"realtime",data:{}}),this.$store.commit("setDataRealtime",{key:"realtime",data:e.data}),this.$store.dispatch("counterColorStore","realtime"))},updateStatistic:function(e){null==e.error&&this.$store.commit("setDataStatistic",{key:"statistic",data:e.data})},solar_realtime:function(e){const t=this.$store.getters.getUser,a=Je(t,["solar_realtime"],Ge.READ);a&&(He.play(),this.$store.dispatch("currentDataStore",{key:"solar_realtime",data:e}),this.$store.dispatch("realtimeStore",{key:"solar_realtime",data:e}),this.$store.dispatch("counterColorStore","solar_realtime"))},solar_statistic:function(e){this.$store.commit("setDataStatistic",{key:"solar_statistic",data:e})},updateRealtimeSolar:function(e){null==e.error&&(0==e.data.length&&this.$store.commit("setCurrentData",{key:"solar_realtime",data:{}}),this.$store.commit("setDataRealtime",{key:"solar_realtime",data:e.data}),this.$store.dispatch("counterColorStore","solar_realtime"))},updateStatisticSolar:function(e){null==e.error&&this.$store.commit("setDataStatistic",{key:"solar_statistic",data:e.data})},usersLogin:function(e){const t=this.getUser,a=e.currentLogin??"";a!=t.username&&Xe({title:"Signin",message:a+" đã truy cập web giám sát",type:"signin",duration:5e3}),this.$store.commit("setUsersLogin",e.usersLogin)},userLogout:function(e){const t=e.currentLogout??"",a=e.usersLogin;Xe({title:"Signout",message:t+" đã rời khỏi web giám sát",type:"signout",duration:5e3}),this.$store.commit("setUsersLogin",a)}};var et=Qe,tt={name:"App",components:{NavBar:Ee,Footer:Ze},data(){return{}},computed:{...(0,i.Se)(["getUser"])},created(){Ve.getAllPermissions().then((e=>{this.setPermissionDetails(e.data.map((e=>({id:e.id,name:e.name}))))})).catch((e=>{console.log(e)}))},methods:{...(0,i.OI)(["setPermissionDetails"])},sockets:et};const at=(0,_e.Z)(tt,[["render",Z]]);var st=at,it=a(2119);function nt(e,t,a,s,i,n){const l=(0,q.up)("SideNav");return(0,q.wg)(),(0,q.iD)("div",null,[(0,q.Wm)(l)])}const lt={id:"layoutSidenav"},rt={id:"layoutSidenav_nav"};function ot(e,t,a,s,i,n){const l=(0,q.up)("SideNavToogle"),r=(0,q.up)("SideNavContent");return(0,q.wg)(),(0,q.iD)("div",lt,[(0,q._)("div",rt,[(0,q.Wm)(l)]),(0,q.Wm)(r)])}const dt={class:"sb-sidenav accordion sb-sidenav-dark",id:"sidenavAccordion"};function ct(e,t,a,s,i,n){const l=(0,q.up)("SideNavMenu"),r=(0,q.up)("SideNavFooter");return(0,q.wg)(),(0,q.iD)("nav",dt,[(0,q.Wm)(l),(0,q.Wm)(r)])}const ut={class:"sb-sidenav-menu"},mt={class:"nav"};function ht(e,t,a,s,i,n){const l=(0,q.up)("SideNavMenuHomePage"),r=(0,q.up)("SideNavMenuAccount");return(0,q.wg)(),(0,q.iD)("div",ut,[(0,q._)("div",mt,["homepage"==n.canShow?((0,q.wg)(),(0,q.j4)(l,{key:0})):"account"==n.canShow?((0,q.wg)(),(0,q.j4)(r,{key:1})):(0,q.kq)("",!0)])])}function gt(e,t,a,s,i,n){const l=(0,q.up)("side-nav-home"),r=(0,q.up)("side-nav-manager"),o=(0,q.up)("side-nav-solar"),d=(0,q.up)("side-nav-chart"),c=(0,q.up)("side-nav-redmine"),u=(0,q.up)("side-nav-bmb");return(0,q.wg)(),(0,q.iD)("div",null,[n.canShowHome?((0,q.wg)(),(0,q.j4)(l,{key:0})):(0,q.kq)("",!0),n.canShowManager?((0,q.wg)(),(0,q.j4)(r,{key:1})):(0,q.kq)("",!0),n.canShowSolar?((0,q.wg)(),(0,q.j4)(o,{key:2})):(0,q.kq)("",!0),n.canShowChart?((0,q.wg)(),(0,q.j4)(d,{key:3})):(0,q.kq)("",!0),n.canShowRedmine?((0,q.wg)(),(0,q.j4)(c,{key:4})):(0,q.kq)("",!0),n.canShowBmb?((0,q.wg)(),(0,q.j4)(u,{key:5})):(0,q.kq)("",!0)])}const pt=(0,q.uE)('<a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapseBmb" aria-expanded="false" aria-controls="collapseBmb"><div class="sb-nav-link-icon"><i class="fas fa-columns"></i></div> Warning Data <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div></a>',1),bt={class:"collapse",id:"collapseBmb","aria-labelledby":"headingOne","data-bs-parent":"#sidenavAccordion"},vt={class:"sb-sidenav-menu-nested nav"},_t=(0,q._)("div",{class:"sb-nav-link-icon"},[(0,q._)("i",{class:"fas fa-chart-area"})],-1),ft=(0,q.Uk)(" Realtime ");function wt(e,t,a,s,i,n){const l=(0,q.up)("router-link");return(0,q.wg)(),(0,q.iD)("div",null,[pt,(0,q._)("div",bt,[(0,q._)("nav",vt,[(0,q.Wm)(l,{tag:"a",class:"nav-link",to:"/bmb_room/realtime","active-class":"active"},{default:(0,q.w5)((()=>[_t,ft])),_:1})])])])}var yt={name:"SideNavBmb"};const Dt=(0,_e.Z)(yt,[["render",wt]]);var kt=Dt;const St=(0,q.uE)('<a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapseChart" aria-expanded="false" aria-controls="collapseChart"><div class="sb-nav-link-icon"><i class="fas fa-chart-bar"></i></div> Chart <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div></a>',1),Ut={class:"collapse",id:"collapseChart","aria-labelledby":"headingOne","data-bs-parent":"#sidenavAccordion"},Rt={class:"sb-sidenav-menu-nested nav"},Mt=(0,q._)("div",{class:"sb-nav-link-icon"},[(0,q._)("i",{class:"fas fa-users-cog"})],-1),Pt=(0,q.Uk)(" Realtime "),Ct=(0,q._)("div",{class:"sb-nav-link-icon"},[(0,q._)("i",{class:"fas fa-user-tag"})],-1),xt=(0,q.Uk)(" Statistic ");function It(e,t,a,s,i,n){const l=(0,q.up)("router-link");return(0,q.wg)(),(0,q.iD)("div",null,[St,(0,q._)("div",Ut,[(0,q._)("nav",Rt,[(0,q.Wm)(l,{tag:"a",class:"nav-link",to:"/chart/realtime","active-class":"active",exact:""},{default:(0,q.w5)((()=>[Mt,Pt])),_:1}),(0,q.Wm)(l,{tag:"a",class:"nav-link",to:"/chart/statistic","active-class":"active"},{default:(0,q.w5)((()=>[Ct,xt])),_:1})])])])}var Nt={name:"SideNavChart"};const At=(0,_e.Z)(Nt,[["render",It]]);var Lt=At;const Tt=(0,q.uE)('<a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapseData" aria-expanded="false" aria-controls="collapseData"><div class="sb-nav-link-icon"><i class="fas fa-columns"></i></div> Data <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div></a>',1),Et={class:"collapse",id:"collapseData","aria-labelledby":"headingOne","data-bs-parent":"#sidenavAccordion"},Ft={class:"sb-sidenav-menu-nested nav"},Bt=(0,q._)("div",{class:"sb-nav-link-icon"},[(0,q._)("i",{class:"fas fa-chart-area"})],-1),Ot=(0,q.Uk)(" Realtime "),Wt=(0,q._)("div",{class:"sb-nav-link-icon"},[(0,q._)("i",{class:"fas fa-table"})],-1),qt=(0,q.Uk)(" Statistic ");function zt(e,t,a,s,i,n){const l=(0,q.up)("router-link");return(0,q.wg)(),(0,q.iD)("div",null,[Tt,(0,q._)("div",Et,[(0,q._)("nav",Ft,[(0,q.Wm)(l,{tag:"a",class:"nav-link",to:"/realtime","active-class":"active"},{default:(0,q.w5)((()=>[Bt,Ot])),_:1}),(0,q.Wm)(l,{tag:"a",class:"nav-link",to:"/statistic","active-class":"active"},{default:(0,q.w5)((()=>[Wt,qt])),_:1})])])])}var Zt={name:"SideNavHome"};const Vt=(0,_e.Z)(Zt,[["render",zt]]);var jt=Vt;const $t=(0,q.uE)('<a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapseManager" aria-expanded="false" aria-controls="collapseManager"><div class="sb-nav-link-icon"><i class="fas fa-columns"></i></div> Manager <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div></a>',1),Ht={class:"collapse",id:"collapseManager","aria-labelledby":"headingOne","data-bs-parent":"#sidenavAccordion"},Kt={class:"sb-sidenav-menu-nested nav"},Yt=(0,q._)("div",{class:"sb-nav-link-icon"},[(0,q._)("i",{class:"fas fa-users-cog"})],-1),Gt=(0,q.Uk)(" Users "),Jt=(0,q._)("div",{class:"sb-nav-link-icon"},[(0,q._)("i",{class:"fas fa-users-cog"})],-1),Xt=(0,q.Uk)(" Roles "),Qt=(0,q._)("div",{class:"sb-nav-link-icon"},[(0,q._)("i",{class:"fas fa-user-tag"})],-1),ea=(0,q.Uk)(" Permissions ");function ta(e,t,a,s,i,n){const l=(0,q.up)("router-link");return(0,q.wg)(),(0,q.iD)("div",null,[$t,(0,q._)("div",Ht,[(0,q._)("nav",Kt,[(0,q.Wm)(l,{tag:"a",class:"nav-link",to:"/managerUser","active-class":"active",exact:""},{default:(0,q.w5)((()=>[Yt,Gt])),_:1}),(0,q.Wm)(l,{tag:"a",class:"nav-link",to:"/managerRole","active-class":"active",exact:""},{default:(0,q.w5)((()=>[Jt,Xt])),_:1}),(0,q.Wm)(l,{tag:"a",class:"nav-link",to:"/managerPermission","active-class":"active"},{default:(0,q.w5)((()=>[Qt,ea])),_:1})])])])}var aa={name:"SideNavManager"};const sa=(0,_e.Z)(aa,[["render",ta]]);var ia=sa;const na=(0,q.uE)('<a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapseRedmine" aria-expanded="false" aria-controls="collapseRedmine"><div class="sb-nav-link-icon"><i class="fas fa-columns"></i></div> Redmine <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div></a>',1),la={class:"collapse",id:"collapseRedmine","aria-labelledby":"headingOne","data-bs-parent":"#sidenavAccordion"},ra={class:"sb-sidenav-menu-nested nav"},oa=(0,q._)("div",{class:"sb-nav-link-icon"},[(0,q._)("i",{class:"fas fa-tasks"})],-1),da=(0,q.Uk)(" Tasks "),ca={class:"sb-sidenav-menu-nested nav"},ua=(0,q._)("div",{class:"sb-nav-link-icon"},[(0,q._)("i",{class:"fas fa-chart-pie"})],-1),ma=(0,q.Uk)(" Statistics ");function ha(e,t,a,s,i,n){const l=(0,q.up)("router-link");return(0,q.wg)(),(0,q.iD)("div",null,[na,(0,q._)("div",la,[(0,q._)("nav",ra,[(0,q.Wm)(l,{tag:"a",class:"nav-link",to:{name:"issue"},"active-class":"active",exact:""},{default:(0,q.w5)((()=>[oa,da])),_:1})]),(0,q._)("nav",ca,[(0,q.Wm)(l,{tag:"a",class:"nav-link",to:{name:"redmine_statistic"}},{default:(0,q.w5)((()=>[ua,ma])),_:1})])])])}var ga={name:"SideNavRedmine"};const pa=(0,_e.Z)(ga,[["render",ha]]);var ba=pa;const va=(0,q.uE)('<a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapseSolar" aria-expanded="false" aria-controls="collapseSolar"><div class="sb-nav-link-icon"><i class="fas fa-columns"></i></div> Solar <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div></a>',1),_a={class:"collapse",id:"collapseSolar","aria-labelledby":"headingOne","data-bs-parent":"#sidenavAccordion"},fa={class:"sb-sidenav-menu-nested nav"},wa=(0,q._)("div",{class:"sb-nav-link-icon"},[(0,q._)("i",{class:"fas fa-users-cog"})],-1),ya=(0,q.Uk)(" Realtime "),Da=(0,q._)("div",{class:"sb-nav-link-icon"},[(0,q._)("i",{class:"fas fa-user-tag"})],-1),ka=(0,q.Uk)(" Statistic ");function Sa(e,t,a,s,i,n){const l=(0,q.up)("router-link");return(0,q.wg)(),(0,q.iD)("div",null,[va,(0,q._)("div",_a,[(0,q._)("nav",fa,[(0,q.Wm)(l,{tag:"a",class:"nav-link",to:"/solar/realtime","active-class":"active",exact:""},{default:(0,q.w5)((()=>[wa,ya])),_:1}),(0,q.Wm)(l,{tag:"a",class:"nav-link",to:"/solar/statistic","active-class":"active"},{default:(0,q.w5)((()=>[Da,ka])),_:1})])])])}var Ua={name:"SideNavSolar"};const Ra=(0,_e.Z)(Ua,[["render",Sa]]);var Ma=Ra,Pa={name:"SideNavMeneHomePage",components:{SideNavHome:jt,SideNavManager:ia,SideNavSolar:Ma,SideNavChart:Lt,SideNavRedmine:ba,SideNavBmb:kt},computed:{...(0,i.Se)(["getUser","getLoadTable"]),canShowHome(){return Je(this.getUser,["realtime","statistic"],Ge.READ)},canShowManager(){return Je(this.getUser,["managerRole","managerUser","managerPermission"],Ge.READ)},canShowSolar(){return Je(this.getUser,["solar_realtime","solar_statistic"],Ge.READ)},canShowChart(){return Je(this.getUser,["asdsd"],Ge.READ)},canShowRedmine(){return Je(this.getUser,["issues"],Ge.READ)},canShowBmb(){return Je(this.getUser,["bmb_realtime"],Ge.READ)}}};const Ca=(0,_e.Z)(Pa,[["render",gt]]);var xa=Ca;const Ia=(0,q.uE)('<a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapseAccount" aria-expanded="false" aria-controls="collapseAccount"><div class="sb-nav-link-icon"><i class="fas fa-columns"></i></div> Account <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div></a>',1),Na={class:"collapse",id:"collapseAccount","aria-labelledby":"headingOne","data-bs-parent":"#sidenavAccordion"},Aa={class:"sb-sidenav-menu-nested nav"},La=(0,q.Uk)("General"),Ta=(0,q.Uk)("Change password"),Ea=(0,q.Uk)("Request Role");function Fa(e,t,a,s,i,n){const l=(0,q.up)("router-link");return(0,q.wg)(),(0,q.iD)("div",null,[Ia,(0,q._)("div",Na,[(0,q._)("nav",Aa,[(0,q.Wm)(l,{tag:"a",class:"nav-link",to:{name:"general"},"active-class":"active",exact:""},{default:(0,q.w5)((()=>[La])),_:1}),(0,q.Wm)(l,{tag:"a",class:"nav-link",to:{name:"change_password"},"active-class":"active"},{default:(0,q.w5)((()=>[Ta])),_:1}),"manager"!==e.getUser.role?((0,q.wg)(),(0,q.j4)(l,{key:0,tag:"a",class:"nav-link",to:{name:"request_role"},"active-class":"active"},{default:(0,q.w5)((()=>[Ea])),_:1})):(0,q.kq)("",!0)])])])}var Ba={name:"Account",computed:{...(0,i.Se)(["getUser"])},methods:{}};const Oa=(0,_e.Z)(Ba,[["render",Fa]]);var Wa=Oa,qa={name:"SideNavMenu",components:{SideNavMenuHomePage:xa,SideNavMenuAccount:Wa},computed:{...(0,i.Se)(["getSideNavMenu"]),canShow(){return this.getSideNavMenu}}};const za=(0,_e.Z)(qa,[["render",ht]]);var Za=za;const Va={class:"sb-sidenav-footer"},ja=(0,q._)("div",{class:"small"},"Logged in as:",-1),$a=(0,q.Uk)(" IFC "),Ha=[ja,$a];function Ka(e,t,a,s,i,n){return(0,q.wg)(),(0,q.iD)("div",Va,Ha)}var Ya={name:"SideNavFooter"};const Ga=(0,_e.Z)(Ya,[["render",Ka]]);var Ja=Ga,Xa={name:"SideNavToogle",components:{SideNavMenu:Za,SideNavFooter:Ja}};const Qa=(0,_e.Z)(Xa,[["render",ct]]);var es=Qa;const ts={id:"layoutSidenav_content"};function as(e,t,a,s,i,n){const l=(0,q.up)("router-view"),r=(0,q.up)("Footer");return(0,q.wg)(),(0,q.iD)("div",ts,[(0,q.Wm)(l),(0,q.Wm)(r)])}var ss={name:"SideNavContent",components:{Footer:Ze}};const is=(0,_e.Z)(ss,[["render",as]]);var ns=is,ls={name:"SideNav",components:{SideNavToogle:es,SideNavContent:ns}};const rs=(0,_e.Z)(ls,[["render",ot]]);var os=rs,ds={name:"HomePage",data(){return{tableName:""}},components:{NavBar:Ee,SideNav:os},created(){document.title="Trang chủ"},methods:{...(0,i.OI)(["setUser","setIsLoggin","setLoadTable","setSideNavMenu"])},mounted(){const e=localStorage.getItem("accessToken"),t=(0,u.Z)(e);this.setUser(t),this.setIsLoggin(!0),this.setSideNavMenu("homepage"),this.$socket.emit("login",{username:t.username})}};const cs=(0,_e.Z)(ds,[["render",nt]]);var us=cs;const ms={id:"layoutError"},hs={id:"layoutError_content"},gs={class:"container"},ps={class:"row justify-content-center"},bs={class:"col-lg-6"},vs={class:"text-center mt-4"},_s=(0,q._)("img",{class:"mb-4 img-error",src:"/assets/images/404_error.jpg"},null,-1),fs=(0,q._)("p",{class:"lead"},"This requested URL was not found on this server.",-1),ws=(0,q._)("i",{class:"fas fa-arrow-left me-1"},null,-1),ys=(0,q.Uk)(" Return to HomePage ");function Ds(e,t,a,s,i,n){const l=(0,q.up)("router-link");return(0,q.wg)(),(0,q.iD)("div",ms,[(0,q._)("div",hs,[(0,q._)("main",null,[(0,q._)("div",gs,[(0,q._)("div",ps,[(0,q._)("div",bs,[(0,q._)("div",vs,[_s,fs,(0,q.Wm)(l,{to:"/"},{default:(0,q.w5)((()=>[ws,ys])),_:1})])])])])])])])}var ks={name:"Err404",created(){document.title="Đã xảy ra lỗi"}};const Ss=(0,_e.Z)(ks,[["render",Ds]]);var Us=Ss;function Rs(e,t,a,s,i,n){const l=(0,q.up)("NavBar");return(0,q.wg)(),(0,q.iD)("div",null,[(0,q.Wm)(l)])}var Ms={name:"dashboard",data(){return{tableName:""}},created(){document.title="Trang chủ"},components:{NavBar:Ee},mounted(){console.log(JSON.parse(this.$cookies.get("refreshToken")))}};const Ps=(0,_e.Z)(Ms,[["render",Rs]]);var Cs=Ps;const xs=async(e,t,a)=>{if("login"===t.name)a();else{const t=await me.isLogged();200===t?.status?a():a({name:"login",query:{redirect:e.name}})}},Is=async(e,t,a)=>{const s=await me.isLogged();200===s?.status?a({name:"home"}):a()},Ns={id:"layoutAuthentication"},As={id:"layoutAuthentication_content"},Ls={class:"container"},Ts={class:"row justify-content-center"},Es={class:"col-lg-5"},Fs={class:"card shadow-lg border-0 rounded-lg mt-5"},Bs={class:"card-header"},Os=(0,q._)("h3",{class:"text-center font-weight-light my-4"},"Login",-1),Ws={class:"text-center message-err"},qs={class:"card-body"},zs={class:"form-floating mb-3"},Zs=(0,q._)("label",{for:"inputEmail"},"Email address",-1),Vs={class:"form-floating mb-3"},js=(0,q._)("label",{for:"inputPassword"},"Password",-1),$s=(0,q._)("div",{class:"form-check mb-3"},[(0,q._)("input",{class:"form-check-input",id:"inputRememberPassword",type:"checkbox",value:""}),(0,q._)("label",{class:"form-check-label",for:"inputRememberPassword"},"Remember Password")],-1),Hs={class:"d-flex align-items-center justify-content-between mt-4 mb-0"},Ks=(0,q.Uk)("Forgot Password?"),Ys={key:0,class:"btn btn-primary",type:"submit"},Gs={key:1,class:"btn btn-primary",type:"button",disabled:""},Js=(0,q._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),Xs=(0,q.Uk)(" Chờ tí... "),Qs=[Js,Xs],ei={class:"card-footer text-center py-3"},ti={class:"small"},ai=(0,q.Uk)("Need an account? Sign up!");function si(e,t,a,s,i,n){const l=(0,q.up)("Field"),r=(0,q.up)("ErrorMessage"),o=(0,q.up)("router-link"),d=(0,q.up)("Form"),c=(0,q.up)("Footer");return(0,q.wg)(),(0,q.iD)("div",Ns,[(0,q._)("div",As,[(0,q._)("main",null,[(0,q._)("div",Ls,[(0,q._)("div",Ts,[(0,q._)("div",Es,[(0,q._)("div",Fs,[(0,q._)("div",Bs,[Os,(0,q._)("div",Ws,(0,ye.zw)(i.message),1)]),(0,q._)("div",qs,[(0,q.Wm)(d,{action:"",onSubmit:n.submit,method:"post","validation-schema":i.schema},{default:(0,q.w5)((()=>[(0,q._)("div",zs,[(0,q.Wm)(l,{name:"email",class:"form-control",id:"inputEmail",type:"email",placeholder:"name@example.com",modelValue:i.user.email,"onUpdate:modelValue":t[0]||(t[0]=e=>i.user.email=e)},null,8,["modelValue"]),Zs]),(0,q.Wm)(r,{name:"email",class:"help-message"}),(0,q._)("div",Vs,[(0,q.Wm)(l,{name:"password",class:"form-control",id:"inputPassword",type:"password",placeholder:"Password",modelValue:i.user.password,"onUpdate:modelValue":t[1]||(t[1]=e=>i.user.password=e)},null,8,["modelValue"]),js]),(0,q.Wm)(r,{name:"password",class:"help-message"}),$s,(0,q._)("div",Hs,[(0,q.Wm)(o,{to:"/password"},{default:(0,q.w5)((()=>[Ks])),_:1}),i.isLogged?((0,q.wg)(),(0,q.iD)("button",Ys," Login ")):((0,q.wg)(),(0,q.iD)("button",Gs,Qs))])])),_:1},8,["onSubmit","validation-schema"])]),(0,q._)("div",ei,[(0,q._)("div",ti,[(0,q.Wm)(o,{to:"/register"},{default:(0,q.w5)((()=>[ai])),_:1})])])])])])])])]),(0,q.Wm)(c)])}var ii=a(2954),ni=a(4231),li={name:"Login",components:{Footer:Ze,Form:ii.l0,Field:ii.gN,ErrorMessage:ii.Bc},data(){const e=ni.Ry({email:ni.Z_().required().email(),password:ni.Z_().required().min(6)});return{schema:e,user:{email:"",password:""},showError:!1,message:"",isLogged:!0}},computed:{...(0,i.Se)(["getUser"])},created(){document.title="Đăng nhập"},methods:{...(0,i.nv)(["signin"]),routeDefault(){const e=this.getUser,t=e.permissions,a=t.find((e=>e.value>0));return void 0!==a?a.name:"default"},submit(){this.isLogged=!1,this.signin(this.user).then((e=>{this.isLogged=!0;const t=this.$route.query.redirect;this.$router.push({name:t??"home"})})).catch((e=>{this.isLogged=!0,this.message=e.response}))}}};const ri=(0,_e.Z)(li,[["render",si]]);var oi=ri;const di={id:"layoutAuthentication"},ci={id:"layoutAuthentication_content"},ui={class:"container"},mi={class:"row justify-content-center"},hi={class:"col-lg-7"},gi={class:"card shadow-lg border-0 rounded-lg mt-5"},pi={class:"card-header"},bi=(0,q._)("h3",{class:"text-center font-weight-light my-4"}," Create Account ",-1),vi={class:"text-center message-err"},_i={class:"card-body"},fi={class:"form-floating mb-3"},wi=(0,q._)("label",{for:"inputName"},"Name",-1),yi={class:"form-floating mb-3"},Di=(0,q._)("label",{for:"inputEmail"},"Email address",-1),ki={class:"row mb-3"},Si={class:"col-md-6"},Ui={class:"form-floating mb-3 mb-md-0"},Ri=(0,q._)("label",{for:"inputPassword"},"Password",-1),Mi={class:"col-md-6"},Pi={class:"form-floating mb-3 mb-md-0"},Ci=(0,q._)("label",{for:"inputPasswordConfirm"},"Confirm Password",-1),xi={class:"row mb-3"},Ii={class:"col-md-6"},Ni={class:"col-md-6"},Ai={class:"mt-4 mb-0"},Li={class:"d-grid"},Ti={key:0,class:"btn btn-primary btn-block",type:"submit"},Ei={key:1,class:"btn btn-primary",type:"button",disabled:""},Fi=(0,q._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),Bi=(0,q.Uk)(" Chờ tí... "),Oi=[Fi,Bi],Wi={class:"card-footer text-center py-3"},qi={class:"small"},zi=(0,q.Uk)(" Have an account? Go to login");function Zi(e,t,a,s,i,n){const l=(0,q.up)("Field"),r=(0,q.up)("ErrorMessage"),o=(0,q.up)("Form"),d=(0,q.up)("router-link"),c=(0,q.up)("Footer");return(0,q.wg)(),(0,q.iD)("div",di,[(0,q._)("div",ci,[(0,q._)("main",null,[(0,q._)("div",ui,[(0,q._)("div",mi,[(0,q._)("div",hi,[(0,q._)("div",gi,[(0,q._)("div",pi,[bi,(0,q._)("div",vi,(0,ye.zw)(i.messageErr),1)]),(0,q._)("div",_i,[(0,q.Wm)(o,{action:"",onSubmit:n.submit,method:"post","validation-schema":i.schema},{default:(0,q.w5)((()=>[(0,q._)("div",fi,[(0,q.Wm)(l,{name:"name",class:"form-control",id:"inputName",type:"text",placeholder:"Enter your name",modelValue:i.user.username,"onUpdate:modelValue":t[0]||(t[0]=e=>i.user.username=e)},null,8,["modelValue"]),wi]),(0,q.Wm)(r,{name:"name",class:"help-message"}),(0,q._)("div",yi,[(0,q.Wm)(l,{name:"email",class:"form-control",id:"inputEmail",type:"email",placeholder:"name@example.com",modelValue:i.user.email,"onUpdate:modelValue":t[1]||(t[1]=e=>i.user.email=e)},null,8,["modelValue"]),Di]),(0,q.Wm)(r,{name:"email",class:"help-message"}),(0,q._)("div",ki,[(0,q._)("div",Si,[(0,q._)("div",Ui,[(0,q.Wm)(l,{name:"password",class:"form-control",id:"inputPassword",type:"password",placeholder:"Create a password",modelValue:i.user.password,"onUpdate:modelValue":t[2]||(t[2]=e=>i.user.password=e)},null,8,["modelValue"]),Ri])]),(0,q._)("div",Mi,[(0,q._)("div",Pi,[(0,q.Wm)(l,{name:"confirm_password",class:"form-control",id:"inputPasswordConfirm",type:"password",placeholder:"Confirm password",modelValue:i.user.pwdConfirmation,"onUpdate:modelValue":t[3]||(t[3]=e=>i.user.pwdConfirmation=e)},null,8,["modelValue"]),Ci])])]),(0,q._)("div",xi,[(0,q._)("div",Ii,[(0,q.Wm)(r,{name:"password",class:"help-message"})]),(0,q._)("div",Ni,[(0,q.Wm)(r,{name:"confirm_password",class:"help-message"})])]),(0,q._)("div",Ai,[(0,q._)("div",Li,[i.isRegister?((0,q.wg)(),(0,q.iD)("button",Ti,"Create Account")):((0,q.wg)(),(0,q.iD)("button",Ei,Oi))])])])),_:1},8,["onSubmit","validation-schema"])]),(0,q._)("div",Wi,[(0,q._)("div",qi,[(0,q.Wm)(d,{to:"/login"},{default:(0,q.w5)((()=>[zi])),_:1})])])])])])])])]),(0,q.Wm)(c)])}var Vi={name:"Register",components:{Footer:Ze,Form:ii.l0,Field:ii.gN,ErrorMessage:ii.Bc},data(){const e=ni.Ry({name:ni.Z_().required().min(2).max(20),email:ni.Z_().email().required(),password:ni.Z_().min(6).required(),confirm_password:ni.Z_().required().oneOf([ni.iH("password")],"Passwords do not match")});return{schema:e,user:{username:"",email:"",password:"",pwdConfirmation:""},messageErr:"",isRegister:!0}},created(){document.title="Đăng ký tài khoản"},methods:{submit(){this.isRegister=!1,me.register(this.user).then((e=>{this.isRegister=!0,this.$router.push("/login")})).catch((e=>{this.isRegister=!0,this.messageErr=e.response.data}))}}};const ji=(0,_e.Z)(Vi,[["render",Zi]]);var $i=ji;const Hi={id:"layoutAuthentication"},Ki={id:"layoutAuthentication_content"},Yi={class:"container"},Gi={class:"row justify-content-center"},Ji={class:"col-lg-5"},Xi={class:"card shadow-lg border-0 rounded-lg mt-5"},Qi=(0,q._)("div",{class:"card-header"},[(0,q._)("h3",{class:"text-center font-weight-light my-4"},"Password Recovery")],-1),en={class:"card-body"},tn=(0,q._)("div",{class:"small mb-3 text-muted"},"Enter your email address and we will send you a link to reset your password.",-1),an={class:"form-floating mb-3"},sn=(0,q._)("label",{for:"inputEmail"},"Email address",-1),nn={class:"d-flex align-items-center justify-content-between mt-4 mb-0"},ln=(0,q.Uk)("Return to login"),rn={class:"card-footer text-center py-3"},on={class:"small"},dn=(0,q.Uk)("Need an account? Sign up!");function cn(e,t,a,i,n,l){const r=(0,q.up)("router-link"),o=(0,q.up)("Footer");return(0,q.wg)(),(0,q.iD)("div",Hi,[(0,q._)("div",Ki,[(0,q._)("main",null,[(0,q._)("div",Yi,[(0,q._)("div",Gi,[(0,q._)("div",Ji,[(0,q._)("div",Xi,[Qi,(0,q._)("div",en,[tn,(0,q._)("form",null,[(0,q._)("div",an,[(0,q.wy)((0,q._)("input",{class:"form-control",id:"inputEmail",type:"email",placeholder:"name@example.com","onUpdate:modelValue":t[0]||(t[0]=e=>n.resetPass=e)},null,512),[[s.nr,n.resetPass]]),sn]),(0,q._)("div",nn,[(0,q.Wm)(r,{to:"/login"},{default:(0,q.w5)((()=>[ln])),_:1}),(0,q._)("a",{class:"btn btn-primary",href:"#",onClick:t[1]||(t[1]=(...e)=>l.resetPassword&&l.resetPassword(...e))},"Reset Password")])])]),(0,q._)("div",rn,[(0,q._)("div",on,[(0,q.Wm)(r,{to:"/register"},{default:(0,q.w5)((()=>[dn])),_:1})])])])])])])])]),(0,q.Wm)(o)])}var un={name:"Password",components:{Footer:Ze},data(){return{resetPass:""}},created(){document.title="Quên mật khẩu"},methods:{resetPassword(){console.log(this.resetPass)}}};const mn=(0,_e.Z)(un,[["render",cn]]);var hn=mn,gn=[{path:"/login",name:"login",component:oi,beforeEnter:Is},{path:"/password",name:"password",component:hn,beforeEnter:Is},{path:"/register",name:"register",component:$i,beforeEnter:Is}];function pn(e,t,a,s,i,n){const l=(0,q.up)("SideNav");return(0,q.wg)(),(0,q.iD)("div",null,[(0,q.Wm)(l)])}var bn={name:"AccountSetting",components:{SideNav:os},created(){document.title="Account Setting"},methods:{...(0,i.OI)(["setUser","setIsLoggin","setSideNavMenu"])},mounted(){const e=localStorage.getItem("accessToken"),t=(0,u.Z)(e);this.setUser(t),this.setIsLoggin(!0),this.setSideNavMenu("account")}};const vn=(0,_e.Z)(bn,[["render",pn]]);var _n=vn;function fn(e,t,a,s,i,n){const l=(0,q.up)("RealTimeTable");return(0,q.wg)(),(0,q.j4)(l,{realtimeData:i.realtimeData},null,8,["realtimeData"])}const wn={class:"container-fluid p-2"},yn={key:0,class:"text-center mt-5"},Dn=(0,q._)("div",{class:"spinner-border",role:"status"},[(0,q._)("span",{class:"visually-hidden"},"Loading...")],-1),kn=[Dn],Sn={key:1,class:"card mb-4"},Un={key:0,class:"text-center"},Rn={key:1,class:"card-body"},Mn={class:"dataTable-wrapper dataTable-loading no-footer sortable searchable fixed-columns"},Pn=(0,q._)("div",{class:"dataTable-top"},null,-1),Cn={key:0,class:"d-flex"},xn=["id"],In={class:"table-wrapper"},Nn={class:"table-ifc table-dark table-ifc-hover table-bordered",id:"dataTable",width:"100%",cellspacing:"0"},An=(0,q._)("thead",null,[(0,q._)("tr",{id:"0"},[(0,q._)("th",null,"Type"),(0,q._)("th",null,"System"),(0,q._)("th",null,"Parameter"),(0,q._)("th",null,"Value"),(0,q._)("th",null,"Unit"),(0,q._)("th",null,"Time"),(0,q._)("th",null,"Message"),(0,q._)("th",null,"Action"),(0,q._)("th",null,"Contact")])],-1),Ln=["id"];function Tn(e,t,a,s,i,n){const l=(0,q.up)("ModalRealtime");return(0,q.wg)(),(0,q.iD)("main",null,[(0,q._)("div",wn,[a.realtimeData.isLoading?((0,q.wg)(),(0,q.iD)("div",yn,kn)):((0,q.wg)(),(0,q.iD)("div",Sn,[a.realtimeData.isError?((0,q.wg)(),(0,q.iD)("p",Un,"Đã có lỗi xảy ra: "+(0,ye.zw)(a.realtimeData.error)+". Vui lòng liên hệ quản trị viên!",1)):((0,q.wg)(),(0,q.iD)("div",Rn,[(0,q._)("div",Mn,[Pn,n.getDataItems.length>0?((0,q.wg)(),(0,q.iD)("div",Cn,[((0,q.wg)(!0),(0,q.iD)(q.HY,null,(0,q.Ko)(a.realtimeData.countColors,((e,a)=>((0,q.wg)(),(0,q.iD)("button",{type:"button",class:(0,ye.C_)("btn btn-"+e[0]+" me-2 mb-2"),key:a,id:e[0],onClick:t[0]||(t[0]=(...e)=>n.filterPriority&&n.filterPriority(...e))},(0,ye.zw)(e[1]),11,xn)))),128)),(0,q._)("button",{type:"button",class:(0,ye.C_)("btn btn-"+n.getCurrentData?.color+" me-2 mb-2 mx-5 flex-grow-1"),disabled:""},(0,ye.zw)(n.getCurrentData?.msg),3),(0,q._)("button",{onClick:t[1]||(t[1]=(...e)=>n.removeTask&&n.removeTask(...e)),type:"button",class:"btn btn-primary mb-2"},"Remove Data")])):(0,q.kq)("",!0),(0,q._)("div",In,[(0,q._)("table",Nn,[An,(0,q._)("tbody",null,[((0,q.wg)(!0),(0,q.iD)(q.HY,null,(0,q.Ko)(n.getDataItems,((e,t)=>((0,q.wg)(),(0,q.iD)("tr",{ref_for:!0,ref:"item",id:e?.priority,key:t},[(0,q._)("td",null,(0,ye.zw)(e?.type),1),(0,q._)("td",null,(0,ye.zw)(e?.system),1),(0,q._)("td",null,(0,ye.zw)(e?.parameter),1),(0,q._)("td",null,(0,ye.zw)(e?.value),1),(0,q._)("td",null,(0,ye.zw)(e?.unit),1),(0,q._)("td",null,(0,ye.zw)(e?.time),1),(0,q._)("td",null,(0,ye.zw)(n.collapMessage(e?.message)),1),(0,q._)("td",null,(0,ye.zw)(e?.action),1),(0,q._)("td",null,(0,ye.zw)(n.collapContact(e?.contact)),1)],8,Ln)))),128))])])])])]))]))]),(0,q.Wm)(l,{modal:i.modal},null,8,["modal"])])}const En={ref:"modal",class:"modal fade",id:"realtimeModal",tabindex:"-1","aria-labelledby":"modalLabel","aria-hidden":"true"},Fn={class:"modal-dialog"},Bn={class:"modal-content"},On=(0,q._)("div",{class:"modal-header"},[(0,q._)("h5",{class:"modal-title mt_warning",id:"modalLabel"},"Cảnh báo !!!")],-1),Wn={class:"modal-body"},qn={key:0},zn=(0,q.Uk)(" Lựa chọn 1 trong các option bên dưới để hoàn thành! "),Zn={class:"p-3"},Vn={class:"form-check"},jn=["disabled"],$n=(0,q._)("label",{class:"form-check-label",for:"flexRadioDefault1"}," 1 giờ trước ",-1),Hn={class:"form-check"},Kn=["disabled"],Yn=(0,q._)("label",{class:"form-check-label",for:"flexRadioDefault2"}," 3 giờ trước ",-1),Gn={class:"form-check"},Jn=["disabled"],Xn=(0,q._)("label",{class:"form-check-label",for:"flexRadioDefault3"}," 6 giờ trước ",-1),Qn={class:"form-check"},el=["disabled"],tl=(0,q._)("label",{class:"form-check-label",for:"flexRadioDefault4"}," 12 giờ trước ",-1),al={class:"input-group input-group-sm mb-3 mt-1"},sl=(0,q._)("span",{class:"px-2"},"giờ trước",-1),il={key:1},nl={key:0,class:"modal-footer"},ll=(0,q._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Không",-1),rl={key:1,class:"modal-footer"},ol=(0,q._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Thoát",-1),dl=[ol];function cl(e,t,a,i,n,l){return(0,q.wg)(),(0,q.iD)("div",En,[(0,q._)("div",Fn,[(0,q._)("div",Bn,[On,(0,q._)("div",Wn,[l.isCanShow?((0,q.wg)(),(0,q.iD)("div",qn,[zn,(0,q._)("div",Zn,[(0,q._)("div",Vn,[(0,q.wy)((0,q._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.selection=e),class:"form-check-input",type:"radio",value:"1",name:"flexRadioDefault",id:"flexRadioDefault1",checked:"",disabled:n.inputDisable},null,8,jn),[[s.G2,n.selection]]),$n]),(0,q._)("div",Hn,[(0,q.wy)((0,q._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.selection=e),class:"form-check-input",type:"radio",value:"3",name:"flexRadioDefault",id:"flexRadioDefault2",disabled:n.inputDisable},null,8,Kn),[[s.G2,n.selection]]),Yn]),(0,q._)("div",Gn,[(0,q.wy)((0,q._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.selection=e),class:"form-check-input",type:"radio",value:"6",name:"flexRadioDefault",id:"flexRadioDefault3",disabled:n.inputDisable},null,8,Jn),[[s.G2,n.selection]]),Xn]),(0,q._)("div",Qn,[(0,q.wy)((0,q._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.selection=e),class:"form-check-input",type:"radio",value:"12",name:"flexRadioDefault",id:"flexRadioDefault4",disabled:n.inputDisable},null,8,el),[[s.G2,n.selection]]),tl]),(0,q._)("div",al,[(0,q.wy)((0,q._)("input",{onKeyup:t[4]||(t[4]=(...e)=>l.getHour&&l.getHour(...e)),"onUpdate:modelValue":t[5]||(t[5]=e=>n.inputHour=e),type:"number",class:"form-control input-hour",placeholder:"2","aria-label":"Recipient's username","aria-describedby":"basic-addon2",min:"0.1",max:"99",step:"0.1"},null,544),[[s.nr,n.inputHour]]),sl])])])):((0,q.wg)(),(0,q.iD)("div",il," Bạn không có quyền để sử dụng chức năng này. Vui lòng liên hệ quản trị viên. "))]),l.isCanShow?((0,q.wg)(),(0,q.iD)("div",nl,[ll,(0,q._)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:t[6]||(t[6]=(...e)=>l.deleteAll&&l.deleteAll(...e))},"Có")])):((0,q.wg)(),(0,q.iD)("div",rl,dl))])])],512)}var ul={name:"ModalRealtime",data(){return{selection:"1",checkerName:"",inputHour:"",inputDisable:!1,hourRemove:0}},props:["modal"],computed:{...(0,i.Se)(["getLoginName"]),isCanShow(){return this.modal.isCan}},mounted(){this.checkerName=this.getLoginName},methods:{async deleteAll(){this.inputDisable||(this.hourRemove=parseInt(this.selection));const e=this.modal.name;var t;t="realtime"==this.modal.name?"updateRealtime":"bmb_realtime"==this.modal.name?"updateRealtimeBmb":"updateRealtimeSolar",this.$socket.emit("deleteRealtime",{deleteChannel:e,updateChannel:t,username:this.checkerName,hour:this.hourRemove})},isNaN(e){return e=Number(e),e!=e},getHour(){this.hourRemove=parseInt(this.inputHour),!isNaN(this.hourRemove)&&parseFloat(this.inputHour)>0?this.inputDisable=!0:this.inputDisable=!1}}};const ml=(0,_e.Z)(ul,[["render",cl]]);var hl=ml,gl={name:"Realtime",components:{ModalRealtime:hl},data(){return{user:null,isFilter:!1,dataFilter:[],preFilter:"",modal:{name:null,isCan:!0}}},props:{realtimeData:{type:Object,default:{isError:!1,error:null,isLoading:!0,routeName:"",countColors:[],dataItems:[],currentData:{}}}},computed:{...(0,i.Se)(["getUser"]),getDataItems(){return this.isFilter?this.dataFilter:this.realtimeData.dataItems},getCurrentData(){return this.realtimeData.currentData}},created(){this.user=this.getUser},methods:{collapContact(e){const t=e.split(",");return t.length>1?t[0]+",...":t[0]},collapMessage(e){const t=e.split(" ");return t.length>10?e.slice(0,10)+",...":e},removeTask(){const e=Je(this.user,[this.realtimeData.routeName],Ge.WRITE);this.modal.isCan=!!e;var t=new bootstrap.Modal(document.getElementById("realtimeModal"));this.modal.name=this.realtimeData.routeName,t.show()},filterPriority(e){if(this.preFilter!==e.target.id){this.preFilter=e.target.id,this.isFilter=!0;const t=y.colorToId(e.target.id),a=this.realtimeData.dataItems;this.dataFilter=a.filter((e=>e.priority==t))}else this.isFilter=!1,this.preFilter=""}}};const pl=(0,_e.Z)(gl,[["render",Tn]]);var bl=pl,vl={name:"BDHRealTimeTable",data(){return{realtimeData:{isError:!1,error:null,isLoading:!0,routeName:"",countColors:[],dataItems:[],currentData:{}}}},components:{RealTimeTable:bl},computed:{...(0,i.Se)(["getDataRealtime","getCountColors","getCurrentData"]),countColors(){return this.realtimeData.countColors=this.getCountColors},dataItems(){return this.realtimeData.dataItems=this.getDataRealtime},currentData(){return this.realtimeData.currentData=this.getCurrentData}},watch:{countColors(){},dataItems(){},currentData(){}},async created(){document.title="BDH Realtime",this.realtimeData.routeName=this.$route.name,this.getRealtimeStore(this.realtimeData.routeName).then((e=>{""==e&&(e=[]),this.setDataRealtime({key:"realtime",data:e}),this.counterColorStore(this.realtimeData.routeName),this.realtimeData.currentData=this.getCurrentData,this.realtimeData.isLoading=!1})).catch((e=>{this.realtimeData.isLoading=!1,this.realtimeData.isError=!0,this.realtimeData.error=e.message}))},methods:{...(0,i.nv)(["getRealtimeStore","counterColorStore"]),...(0,i.OI)(["setDataRealtime"])}};const _l=(0,_e.Z)(vl,[["render",fn]]);var fl=_l;function wl(e,t,a,s,i,n){const l=(0,q.up)("statistic-table");return(0,q.wg)(),(0,q.j4)(l,{statisticData:i.statisticData},null,8,["statisticData"])}const yl={class:"container-fluid p-2"},Dl={key:0,class:"text-center mt-5"},kl=(0,q._)("div",{class:"spinner-border",role:"status"},[(0,q._)("span",{class:"visually-hidden"},"Loading...")],-1),Sl=[kl],Ul={key:1,class:"card mb-4"},Rl={key:0,class:"text-center"},Ml={key:1,class:"card-body"},Pl={class:"dataTable-wrapper dataTable-loading no-footer sortable searchable fixed-columns"},Cl=(0,q._)("div",{class:"dataTable-top"},null,-1),xl={class:"table-wrapper"},Il={class:"table-ifc table-dark table-ifc-hover table-bordered",id:"dataTable",width:"100%",cellspacing:"0"},Nl={id:"0"},Al=(0,q._)("th",null,"Type",-1),Ll=(0,q._)("th",null,"System",-1),Tl=(0,q._)("th",null,"Message",-1),El=(0,q._)("th",null,"Total",-1),Fl=(0,q._)("th",null,"Action",-1),Bl=(0,q._)("th",null,"Person",-1),Ol=["id"],Wl=["value","checked","disabled"],ql=["id"];function zl(e,t,a,s,i,n){const l=(0,q.up)("modal-statistic"),r=(0,q.up)("modal-error-role");return(0,q.wg)(),(0,q.iD)("main",null,[(0,q._)("div",yl,[a.statisticData.isLoading?((0,q.wg)(),(0,q.iD)("div",Dl,Sl)):((0,q.wg)(),(0,q.iD)("div",Ul,[a.statisticData.isError?((0,q.wg)(),(0,q.iD)("p",Rl,"Đã có lỗi xảy ra: "+(0,ye.zw)(a.statisticData.error)+". Vui lòng liên hệ quản trị viên!",1)):((0,q.wg)(),(0,q.iD)("div",Ml,[(0,q._)("div",Pl,[Cl,(0,q._)("div",xl,[(0,q._)("table",Il,[(0,q._)("thead",null,[(0,q._)("tr",Nl,[Al,Ll,Tl,El,Fl,Bl,(0,q._)("th",{onClick:t[0]||(t[0]=(...e)=>n.doneTaskSelections&&n.doneTaskSelections(...e)),id:"delete-all",class:(0,ye.C_)(n.enableDone)},"Done",2)])]),(0,q._)("tbody",null,[((0,q.wg)(!0),(0,q.iD)(q.HY,null,(0,q.Ko)(n.getDataItems,((e,a)=>((0,q.wg)(),(0,q.iD)("tr",{ref_for:!0,ref:"item",id:e?.priority,key:a},[(0,q._)("td",null,(0,ye.zw)(e?.type),1),(0,q._)("td",null,(0,ye.zw)(e?.system),1),(0,q._)("td",null,(0,ye.zw)(e?.parameter),1),(0,q._)("td",null,(0,ye.zw)(e?.total),1),(0,q._)("td",null,[(0,q._)("input",{onClick:t[1]||(t[1]=(...e)=>n.check&&n.check(...e)),name:"chkbox",value:a,class:"form-check-input",type:"checkbox",checked:e.isAction,disabled:n.isDisable(e.username)},null,8,Wl)]),(0,q._)("td",{ref_for:!0,ref:"checkerName_"+a},(0,ye.zw)(e.username),513),(0,q._)("td",null,[(0,q._)("i",{onClick:t[2]||(t[2]=(...e)=>n.doneOneTask&&n.doneOneTask(...e)),id:a,class:(0,ye.C_)("fas fa-trash "+n.isAllow),style:{color:"white"}},null,10,ql)])],8,Ol)))),128))])])])])]))]))]),(0,q.Wm)(l),(0,q.Wm)(r)])}const Zl={ref:"modal",class:"modal fade",id:"errorRoleModal",tabindex:"-1","aria-labelledby":"modalLabel","aria-hidden":"true"},Vl=(0,q.uE)('<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title mt_warning" id="modalLabel">Cảnh báo !!!</h5></div><div class="modal-body"> Bạn không có quyền để sử dụng chức năng này. Vui lòng liên hệ quản trị viên. </div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Thoát</button></div></div></div>',1),jl=[Vl];function $l(e,t,a,s,i,n){return(0,q.wg)(),(0,q.iD)("div",Zl,jl,512)}var Hl={name:"ModalErrorRole"};const Kl=(0,_e.Z)(Hl,[["render",$l]]);var Yl=Kl;const Gl={ref:"modal",class:"modal fade",id:"statisticModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Jl={class:"modal-dialog"},Xl={class:"modal-content"},Ql=(0,q._)("div",{class:"modal-header"},[(0,q._)("h5",{class:"modal-title mt_warning",id:"exampleModalLabel"},"Cảnh báo !!!")],-1),er={class:"modal-body"},tr=(0,q.Uk)(" Lựa chọn 1 trong các option bên dưới để hoàn thành! "),ar={class:"p-3"},sr={class:"form-check"},ir=(0,q._)("label",{class:"form-check-label",for:"flexRadioDefault1"}," Hoàn thành các công việc đã check ",-1),nr={class:"form-check"},lr=(0,q._)("label",{class:"form-check-label",for:"flexRadioDefault2"}," Hoàn thành các công việc chưa check ",-1),rr={class:"form-check"},or=(0,q._)("label",{class:"form-check-label",for:"flexRadioDefault3"}," Hoàn thành tất cả ",-1),dr={class:"modal-footer"},cr=(0,q._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Không",-1);function ur(e,t,a,i,n,l){return(0,q.wg)(),(0,q.iD)("div",Gl,[(0,q._)("div",Jl,[(0,q._)("div",Xl,[Ql,(0,q._)("div",er,[tr,(0,q._)("div",ar,[(0,q._)("div",sr,[(0,q.wy)((0,q._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.selection=e),class:"form-check-input",type:"radio",value:"checked",name:"flexRadioDefault",id:"flexRadioDefault1",checked:""},null,512),[[s.G2,n.selection]]),ir]),(0,q._)("div",nr,[(0,q.wy)((0,q._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.selection=e),class:"form-check-input",type:"radio",value:"unchecked",name:"flexRadioDefault",id:"flexRadioDefault2"},null,512),[[s.G2,n.selection]]),lr]),(0,q._)("div",rr,[(0,q.wy)((0,q._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.selection=e),class:"form-check-input",type:"radio",value:"checkedall",name:"flexRadioDefault",id:"flexRadioDefault3"},null,512),[[s.G2,n.selection]]),or])])]),(0,q._)("div",dr,[cr,(0,q._)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:t[3]||(t[3]=(...e)=>l.deleteAll&&l.deleteAll(...e))},"Có")])])])],512)}var mr={name:"ModalStatistic",data(){return{selection:"checked",checkerName:""}},computed:{...(0,i.Se)(["getLoginName"])},mounted(){this.checkerName=this.getLoginName},methods:{async deleteAll(){this.$socket.emit("doneSelectionTask",{userCheck:this.checkerName,selection:this.selection,key:"statistic"})}}};const hr=(0,_e.Z)(mr,[["render",ur]]);var gr=hr,pr={name:"Statistic",components:{ModalStatistic:gr,ModalErrorRole:Yl},data(){return{checkerName:""}},props:{statisticData:{type:Object,default:{isError:!1,error:null,isLoading:!0,routeName:"",dataItems:[]}}},mounted(){this.checkerName=this.getLoginName},computed:{...(0,i.Se)(["getLoginName","getDataStatistic","getSolarStatistic","getUser"]),getDataItems(){return this.statisticData.dataItems},enableDone(){return this.statisticData.dataItems.length?"":"disable"},isAllow(){const e=Je(this.getUser,[this.statisticData.routeName],Ge.WRITE);return e?"":"isAllowed"}},methods:{...(0,i.nv)(["selectTask"]),check(e){this.selectTask({e:e,checkerName:this.checkerName,key:this.statisticData.routeName})},async doneOneTask(e){const t=Je(this.getUser,[this.statisticData.routeName],Ge.WRITE);if(t){let t=this.$refs["checkerName_"+e.target.id][0].innerText||this.checkerName;this.$socket.emit("doneTask",{checkerName:this.checkerName,doneName:t,id:e.target.id,key:this.statisticData.routeName})}else{var a=new bootstrap.Modal(document.getElementById("errorRoleModal"));a.show()}},isDisable(e){const t=Je(this.getUser,[this.statisticData.routeName],Ge.WRITE);return!t||this.checkerName!==e&&""!=e},doneTaskSelections(){const e=Je(this.getUser,[this.statisticData.routeName],Ge.WRITE);if(e){var t=new bootstrap.Modal(document.getElementById("statisticModal"));t.show()}else{var a=new bootstrap.Modal(document.getElementById("errorRoleModal"));a.show()}}}};const br=(0,_e.Z)(pr,[["render",zl]]);var vr=br,_r={name:"BDHStatisticTable",components:{StatisticTable:vr},data(){return{statisticData:{isError:!1,error:null,isLoading:!0,routeName:"",dataItems:[]}}},computed:{...(0,i.Se)(["getDataStatistic"]),getDataItems(){return this.statisticData.dataItems=this.getDataStatistic}},watch:{getDataItems(){}},created(){document.title="BDH Statistic";const e=this.$route.name;this.statisticData.routeName=e,this.getStatisticStore(e).then((e=>{this.statisticData.dataItems=e,this.statisticData.isLoading=!1})).catch((e=>{this.statisticData.isLoading=!1,this.statisticData.isError=!0,this.statisticData.error=e.message}))},methods:{...(0,i.nv)(["getStatisticStore"])}};const fr=(0,_e.Z)(_r,[["render",wl]]);var wr=fr;const yr={class:"container-fluid p-2"},Dr={key:0,class:"text-center mt-5"},kr=(0,q._)("div",{class:"spinner-border",role:"status"},[(0,q._)("span",{class:"visually-hidden"},"Loading...")],-1),Sr=[kr],Ur={key:1,class:"card mb-4"},Rr={key:0,class:"text-center"},Mr={key:1,class:"card-body"},Pr={class:"dataTable-wrapper dataTable-loading no-footer sortable searchable fixed-columns"},Cr=(0,q._)("div",{class:"dataTable-top"},null,-1),xr={class:"table-wrapper"},Ir={class:"table table-striped table-hover"},Nr=(0,q._)("thead",null,[(0,q._)("tr",null,[(0,q._)("th",null,"#"),(0,q._)("th",null,"Name"),(0,q._)("th",null,"Role"),(0,q._)("th",null,"Status"),(0,q._)("th",null,"Date Created"),(0,q._)("th",null,"Action")])],-1),Ar=(0,q._)("td",null,[(0,q._)("span",{class:"status text-success"},"•"),(0,q.Uk)(" Active")],-1),Lr=["id"],Tr=["id"],Er=["id"];function Fr(e,t,a,s,i,n){const l=(0,q.up)("modal-setting-role"),r=(0,q.up)("modal-delete-user"),o=(0,q.up)("modal-setting-permission");return(0,q.wg)(),(0,q.iD)("main",null,[(0,q._)("div",yr,[i.isLoading?((0,q.wg)(),(0,q.iD)("div",Dr,Sr)):((0,q.wg)(),(0,q.iD)("div",Ur,[i.isError?((0,q.wg)(),(0,q.iD)("p",Rr,"Đã có lỗi xảy ra: "+(0,ye.zw)(i.error)+". Vui lòng liên hệ quản trị viên!",1)):((0,q.wg)(),(0,q.iD)("div",Mr,[(0,q._)("div",Pr,[Cr,(0,q._)("div",xr,[(0,q._)("table",Ir,[Nr,(0,q._)("tbody",null,[((0,q.wg)(!0),(0,q.iD)(q.HY,null,(0,q.Ko)(e.getUsers,((e,a)=>((0,q.wg)(),(0,q.iD)("tr",{key:a},[(0,q._)("td",null,(0,ye.zw)(a+1),1),(0,q._)("td",null,(0,ye.zw)(e.username),1),(0,q._)("td",null,(0,ye.zw)(e.role),1),Ar,(0,q._)("td",null,(0,ye.zw)(e.createdAt),1),(0,q._)("td",null,[(0,q._)("a",{href:"#",class:(0,ye.C_)("settings "+n.isDisabled(e.username)),title:"Setting User","data-toggle":"tooltip"},[(0,q._)("i",{id:a,onClick:t[0]||(t[0]=(...e)=>n.settingRole&&n.settingRole(...e)),class:"fas fa-cog"},null,8,Lr)],2),(0,q._)("a",{href:"#",class:(0,ye.C_)("ms-2 settings "+n.isDisabled(e.username)),title:"Setting Permission","data-toggle":"tooltip"},[(0,q._)("i",{id:a,onClick:t[1]||(t[1]=(...e)=>n.settingPermission&&n.settingPermission(...e)),class:"fas fa-cog"},null,8,Tr)],2),(0,q._)("a",{href:"#",class:(0,ye.C_)("ms-2 text-danger delete "+n.isDisabled(e.username)),title:"Delete","data-toggle":"tooltip"},[(0,q._)("i",{id:a,onClick:t[2]||(t[2]=(...e)=>n.deleteUser&&n.deleteUser(...e)),class:"fas fa-user-times"},null,8,Er)],2)])])))),128))])])])])]))]))]),(0,q.Wm)(l,{modal:i.modal},null,8,["modal"]),(0,q.Wm)(r,{modal:i.modal},null,8,["modal"]),(0,q.Wm)(o,{modal:i.modal},null,8,["modal"])])}var Br={getAllRoles:async()=>{try{const e=await c.get("/api/db/role/index");return e}catch(e){throw e}},createRole:async e=>{try{const t=await c.post("/api/db/role/create",{roleName:e});return t}catch(t){throw t}},deleteRole:async e=>{try{const t=await c.post("api/db/role/delete",{id:e});return t}catch(t){throw t}},updateRole:async(e,t)=>{try{const a=await c.post("api/db/role/update",{id:e,data:t});return a}catch(a){throw a}},requestRole:async(e,t,a)=>{try{const s=await c.post("api/db/role/request_role",{email:e,roleName:t,content:a});return s}catch(s){throw s}}},Or={getAllUsers:async()=>{try{const e=await c.get("/api/db/user/index");return e}catch(e){throw e}},updateUserInfo:async e=>{try{const t=await c.post("/api/db/user/update",{user:e});return t}catch(t){throw t}},deleteUser:async e=>{try{const t=await c.post("/api/db/user/delete",{user:e});return t}catch(t){throw t}}},Wr={getIssueIndex:async e=>{try{const t=await c.get("/api/db/issues/"+e);return t}catch(t){throw t}},createIssue:async e=>{try{const t=await c.post("/api/db/issues",{data:e});return t}catch(t){throw t}},updateIssue:async(e,t)=>{try{await c.patch("api/db/issues",{id:e,data:t})}catch(a){throw a}}};d().defaults.withCredentials=!0;const qr={getAllUsers:Or.getAllUsers,updateUserInfo:Or.updateUserInfo,deleteUser:Or.deleteUser,getAllRoles:Br.getAllRoles,createRole:Br.createRole,deleteRole:Br.deleteRole,updateRole:Br.updateRole,getAllPermissions:Ve.getAllPermissions,createPermission:Ve.createPermission,updatePermission:Ve.updatePermission,...Wr};var zr=qr;const Zr={ref:"modal",class:"modal fade",id:"settingUserModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Vr={class:"modal-dialog"},jr={class:"modal-content"},$r=(0,q._)("div",{class:"modal-header"},[(0,q._)("h5",{class:"modal-title",id:"exampleModalLabel"},"User Setting")],-1),Hr={class:"modal-body"},Kr={class:"form-floating mb-3"},Yr=(0,q._)("label",{for:"inputUsernameModal"},"username",-1),Gr=["value"],Jr={class:"modal-footer"},Xr=(0,q._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Không",-1),Qr={key:1,class:"btn btn-primary",type:"button",disabled:""},eo=(0,q._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),to=(0,q.Uk)(" Chờ tí... "),ao=[eo,to];function so(e,t,a,s,i,n){return(0,q.wg)(),(0,q.iD)("div",Zr,[(0,q._)("div",Vr,[(0,q._)("div",jr,[$r,(0,q._)("div",Hr,[(0,q._)("form",{action:"",onSubmit:t[2]||(t[2]=(...e)=>n.submit&&n.submit(...e)),method:"post"},[(0,q._)("div",Kr,[(0,q._)("input",{onInput:t[0]||(t[0]=(...e)=>n.changeName&&n.changeName(...e)),name:"username",class:"form-control",id:"inputUsernameModal",type:"text",ref:"usernameModal"},null,544),Yr]),(0,q._)("select",{onChange:t[1]||(t[1]=(...e)=>n.changeSelection&&n.changeSelection(...e)),class:"form-select",ref:"selection",id:"selectionRole"},[((0,q.wg)(!0),(0,q.iD)(q.HY,null,(0,q.Ko)(e.getRoles,((e,t)=>((0,q.wg)(),(0,q.iD)("option",{class:"role",value:e,key:t},(0,ye.zw)(e),9,Gr)))),128))],544)],32)]),i.isMessage?((0,q.wg)(),(0,q.iD)("div",{key:0,class:(0,ye.C_)("alert mx-3 alert-"+i.type),role:"alert"},(0,ye.zw)(i.message),3)):(0,q.kq)("",!0),(0,q._)("div",Jr,[Xr,i.isUpdated?((0,q.wg)(),(0,q.iD)("button",{key:0,type:"button",class:"btn btn-primary",onClick:t[3]||(t[3]=(...e)=>n.submit&&n.submit(...e))},"Cập nhật")):((0,q.wg)(),(0,q.iD)("button",Qr,ao))])])])],512)}var io={name:"ModalSettingUser",data(){return{user:{},selection:"manager",isUpdated:!0,isMessage:!1,type:"",message:""}},computed:{...(0,i.Se)(["getManagerUserInfo","getRoles"])},updated(){this.user=this.getManagerUserInfo},props:["modal"],methods:{...(0,i.nv)(["updateManagerUsers"]),changeName(){this.isMessage=!1},changeSelection(){this.isMessage=!1},submit(){this.isUpdated=!1;const e={email:this.user.email,username:this.$refs["usernameModal"].value,role:this.$refs["selection"].value,createdAt:this.user.createdAt};zr.updateUserInfo(e).then((t=>{this.isUpdated=!0,this.isMessage=!0,this.type="success",this.message="updated success",this.updateManagerUsers(e)})).catch((e=>{this.isMessage=!0,this.type="danger",this.message=e}))}},mounted(){}};const no=(0,_e.Z)(io,[["render",so]]);var lo=no;const ro={ref:"modal",class:"modal fade",id:"deleteUserModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},oo={class:"modal-dialog"},co={class:"modal-content"},uo=(0,q._)("div",{class:"modal-header"},[(0,q._)("h5",{class:"modal-title",id:"exampleModalLabel"},"User Setting")],-1),mo={class:"modal-body"},ho=(0,q._)("span",null,"Vui lòng nhập mật khẩu xác nhận",-1),go={class:"form-floating mb-3"},po=(0,q._)("label",{for:"inputUsernameModal"},"password",-1),bo={class:"modal-footer"},vo=(0,q._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Không",-1),_o=["disabled"],fo={key:1,class:"btn btn-primary",type:"button",disabled:""},wo=(0,q._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),yo=(0,q.Uk)(" Chờ tí... "),Do=[wo,yo];function ko(e,t,a,i,n,l){return(0,q.wg)(),(0,q.iD)("div",ro,[(0,q._)("div",oo,[(0,q._)("div",co,[uo,(0,q._)("div",mo,[ho,(0,q._)("div",go,[(0,q.wy)((0,q._)("input",{onInput:t[0]||(t[0]=(...e)=>l.clearAlert&&l.clearAlert(...e)),name:"password",class:"form-control",id:"inputPasswordModal",type:"pasword","onUpdate:modelValue":t[1]||(t[1]=e=>n.password=e)},null,544),[[s.nr,n.password]]),po])]),n.isMessage?((0,q.wg)(),(0,q.iD)("div",{key:0,class:(0,ye.C_)("alert mx-3 alert-"+n.type),role:"alert"},(0,ye.zw)(n.message),3)):(0,q.kq)("",!0),(0,q._)("div",bo,[vo,n.isUpdated?((0,q.wg)(),(0,q.iD)("button",{key:0,type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>l.deleteUser&&l.deleteUser(...e)),disabled:n.isDisabled},"Xóa User",8,_o)):((0,q.wg)(),(0,q.iD)("button",fo,Do))])])])],512)}var So={name:"ModalDeleteUser",data(){return{isUpdated:!0,isMessage:!1,message:"",type:"",password:"",isDisabled:!1}},props:["modal"],methods:{...(0,i.nv)(["deleteUserFromManager"]),clearAlert(){this.isMessage=!1},deleteUser(){const e=this.password;"bdh!@#123"===e?zr.deleteUser(this.modal.data.user).then((()=>{this.isMessage=!0,this.type="success",this.message="Xóa User thành công",this.deleteUserFromManager(this.modal.data.eleId),this.isDisabled=!0})).catch((e=>{this.isMessage=!0,this.type="danger",this.message=e})):(this.isMessage=!0,this.type="danger",this.message="Mật khẩu không đúng")}},mounted(){}};const Uo=(0,_e.Z)(So,[["render",ko]]);var Ro=Uo;const Mo={ref:"modal",class:"modal fade",id:"settingPermissionModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Po={class:"modal-dialog"},Co={class:"modal-content"},xo=(0,q._)("div",{class:"modal-header"},[(0,q._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Setting Permission")],-1),Io={class:"modal-body"},No={class:"col-md-6"},Ao=(0,q._)("span",null,"Permission Name",-1),Lo=["value"],To={class:"col-md-6"},Eo=(0,q._)("span",null,"Select permission",-1),Fo=["id"],Bo=["selected"],Oo=["selected"],Wo=["selected"],qo={class:"modal-footer"},zo=(0,q._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Không",-1),Zo={key:1,class:"btn btn-primary",type:"button",disabled:""},Vo=(0,q._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),jo=(0,q.Uk)(" Chờ tí... "),$o=[Vo,jo];function Ho(e,t,a,s,i,n){return(0,q.wg)(),(0,q.iD)("div",Mo,[(0,q._)("div",Po,[(0,q._)("div",Co,[xo,(0,q._)("div",Io,[((0,q.wg)(!0),(0,q.iD)(q.HY,null,(0,q.Ko)(n.getPermissions,((e,a)=>((0,q.wg)(),(0,q.iD)("div",{class:"row",key:a},[(0,q._)("div",No,[Ao,(0,q._)("input",{value:e.name,class:"form-control",id:"inputPermissionnameModal",type:"text"},null,8,Lo)]),(0,q._)("div",To,[Eo,(0,q._)("select",{id:e.id,class:"form-select",name:"setting_select",onChange:t[0]||(t[0]=(...e)=>n.clearAlert&&n.clearAlert(...e))},[(0,q._)("option",{value:"0",selected:0==e.value},"Null(default)",8,Bo),(0,q._)("option",{value:"1",selected:1==e.value},"Read",8,Oo),(0,q._)("option",{value:"2",selected:2==e.value},"Write",8,Wo)],40,Fo)])])))),128))]),i.isMessage?((0,q.wg)(),(0,q.iD)("div",{key:0,class:(0,ye.C_)("alert mx-3 alert-"+e.type),role:"alert"},(0,ye.zw)(i.message),3)):(0,q.kq)("",!0),(0,q._)("div",qo,[zo,i.isUpdated?((0,q.wg)(),(0,q.iD)("button",{key:0,type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>n.updatePermission&&n.updatePermission(...e))},"Thay đổi")):((0,q.wg)(),(0,q.iD)("button",Zo,$o))])])])],512)}var Ko={name:"ModalSettingPermission",data(){return{user:{},isUpdated:!0,isMessage:!1,message:"",permissions:[],rolename:"",permissionName:""}},props:["modal"],computed:{getPermissions(){const e=this.modal.data?.permission??[];return e},getSelected(){}},methods:{...(0,i.OI)(["setPermissionDetails","updatePermissionOfUser"]),clearAlert(){this.isMessage=!1},updatePermission(){this.isUpdated=!1;const e=this.modal.data.userId;var t=[];document.getElementsByName("setting_select").forEach((e=>{t.push({name:e.id,value:e.value})}));const a=JSON.stringify(t);zr.updatePermission(e,a).then((()=>{this.permissions=[],this.isMessage=!0,this.type="success",this.message="Update Permission thành công",this.isUpdated=!0})).catch((e=>{this.isMessage=!0,this.type="danger",this.message=`Có lỗi xảy ra: ${e.message}`,this.isUpdated=!0}))}}};const Yo=(0,_e.Z)(Ko,[["render",Ho]]);var Go=Yo;const Jo={ref:"modal",class:"modal fade",id:"settingRoleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Xo={class:"modal-dialog"},Qo={class:"modal-content"},ed=(0,q._)("div",{class:"modal-header"},[(0,q._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Setting Role")],-1),td={class:"modal-body"},ad={class:"row justify-content-center mb-2"},sd={class:"col-md-6"},id=(0,q._)("span",null,"User Name",-1),nd=["value"],ld={class:"col-md-6"},rd=(0,q._)("span",null,"Select Role",-1),od=["selected"],dd={class:"modal-footer"},cd=(0,q._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Không",-1),ud={key:1,class:"btn btn-primary",type:"button",disabled:""},md=(0,q._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),hd=(0,q.Uk)(" Chờ tí... "),gd=[md,hd];function pd(e,t,a,s,i,n){return(0,q.wg)(),(0,q.iD)("div",Jo,[(0,q._)("div",Xo,[(0,q._)("div",Qo,[ed,(0,q._)("div",td,[(0,q._)("div",ad,[(0,q._)("div",sd,[id,(0,q._)("input",{disabled:"",value:n.getUserName,class:"form-control",id:"inputPermissionnameModal",type:"text"},null,8,nd)]),(0,q._)("div",ld,[rd,(0,q._)("select",{class:"form-select",id:"setting_select",onChange:t[0]||(t[0]=(...e)=>n.clearAlert&&n.clearAlert(...e))},[((0,q.wg)(!0),(0,q.iD)(q.HY,null,(0,q.Ko)(n.getTotalRoles,((e,t)=>((0,q.wg)(),(0,q.iD)("option",{key:t,selected:e.name==n.getRoleName},(0,ye.zw)(e.name),9,od)))),128))],32)])])]),i.isMessage?((0,q.wg)(),(0,q.iD)("div",{key:0,class:(0,ye.C_)("alert mx-3 alert-"+e.type),role:"alert"},(0,ye.zw)(i.message),3)):(0,q.kq)("",!0),(0,q._)("div",dd,[cd,i.isUpdated?((0,q.wg)(),(0,q.iD)("button",{key:0,type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>n.updateRole&&n.updateRole(...e))},"Thay đổi")):((0,q.wg)(),(0,q.iD)("button",ud,gd))])])])],512)}var bd={name:"ModalDeleteUser",data(){return{user:{},isUpdated:!0,isMessage:!1,message:"",permissions:[],rolename:"",permissionName:"",selectedRole:null}},props:["modal"],computed:{getUserName(){return this.modal.data?.username??""},getTotalRoles(){return this.modal.data?.roleTotal??[]},getRoleName(){return this.modal.data?.roleName??""}},methods:{...(0,i.OI)(["setPermissionDetails"]),...(0,i.nv)(["updateRoles","updatePermissionDetails"]),clearAlert(){this.isMessage=!1},updateRole(){this.isUpdated=!1;const e=this.modal.data.eleId,t=this.modal.data.userId,a=document.getElementById("setting_select");JSON.stringify(a.value);zr.updateRole(t,a.value).then((()=>{this.updateRoles({eleId:e,roleName:a.value}),this.permissions=[],this.isMessage=!0,this.type="success",this.message="Update Role thành công",this.isUpdated=!0})).catch((e=>{this.isMessage=!0,this.type="danger",this.message="Thất bại trong quá trình tương tác với DB",this.isUpdated=!0}))}}};const vd=(0,_e.Z)(bd,[["render",pd]]);var _d=vd,fd={name:"ManagerUsers",components:{ModalSettingUser:lo,ModalDeleteUser:Ro,ModalSettingPermission:Go,ModalSettingRole:_d},data(){return{isLoading:!0,modal:{name:null,data:null},roles:[],isError:!1,error:null}},computed:{...(0,i.Se)({getUsers:"getManagerUsers",users:"getManagerUsers",userAuth:"getUser",getRoles:"getRoles"})},created(){document.title="User Manager",zr.getAllUsers().then((e=>(this.setManagerUsers(e.data),zr.getAllRoles()))).then((e=>{this.isLoading=!1;var t=[];t=e.data.map((e=>({id:e.id,name:e.name}))),this.setRoles(t)})).catch((e=>{this.isLoading=!1,this.isError=!0,this.error=e.message}))},mounted(){},methods:{...(0,i.OI)(["setManagerUserInfo","setManagerUsers","setRoles"]),...(0,i.nv)(["getPermissionOfUser"]),isDisabled(e){return e===this.userAuth.username?"":"thamtc.ifc"===e?"disabled":""},settingRole(e){const t=this.getUsers,a=t[e.target.id].id,s=e.target.id,i=t[s].username,n=t[s].role;var l=new bootstrap.Modal(document.getElementById("settingRoleModal"));this.modal.name=l,this.modal.data={userId:a,eleId:s,username:i,roleName:n,roleTotal:this.getRoles},l.show()},settingPermission(e){const t=this.getUsers,a=t[e.target.id].id;var s=new bootstrap.Modal(document.getElementById("settingPermissionModal"));this.modal.name=s;var i=[];this.getPermissionOfUser(a).then((e=>(i=null===e.data||null===e.data.permission?this.userAuth.permissions:JSON.parse(e.data.permission),Ve.getAllPermissions()))).then((e=>{if(e){const s=y.convertPermissionUser(i,e.data);var t=[],n=[];n=e.data.map((e=>({id:e.id,name:e.name,value:"0"}))),n.forEach((e=>{var a=!1;for(let i=0;i<s.length;i++)if(e.name===s[i].name){t.push(s[i]),a=!0;break}a||t.push(e)})),this.modal.data={userId:a,permission:t}}s.show()})).catch((e=>{}))},deleteUser(e){const t=e.target.id,a=this.users;var s=new bootstrap.Modal(document.getElementById("deleteUserModal"));this.modal.name=s,this.modal.data={user:a[t],eleId:t},s.show()}}};const wd=(0,_e.Z)(fd,[["render",Fr]]);var yd=wd;function Dd(e,t,a,s,i,n){const l=(0,q.up)("RealTimeTable");return(0,q.wg)(),(0,q.j4)(l,{realtimeData:i.realtimeData},null,8,["realtimeData"])}var kd={name:"SolarRealTimeTable",data(){return{realtimeData:{isError:!1,error:null,isLoading:!0,routeName:"",countColors:[],dataItems:[],currentData:{}}}},components:{RealTimeTable:bl},computed:{...(0,i.Se)(["getSolarRealtime","getCountColorSolars","getCurrentSolar"]),countColors(){return this.realtimeData.countColors=this.getCountColorSolars},dataItems(){return this.realtimeData.dataItems=this.getSolarRealtime},currentData(){return this.realtimeData.currentData=this.getCurrentSolar}},watch:{countColors(){},dataItems(){},currentData(){}},async created(){document.title="Solar Realtime",this.realtimeData.routeName=this.$route.name,this.getRealtimeStore(this.realtimeData.routeName).then((e=>{""==e&&(e=[]),this.setDataRealtime({key:"solar_realtime",data:e}),this.counterColorStore(this.realtimeData.routeName),this.realtimeData.currentData=this.getCurrentSolar,this.realtimeData.isLoading=!1})).catch((e=>{console.log(e),this.realtimeData.isLoading=!1,this.realtimeData.isError=!0,this.realtimeData.error=e.message}))},methods:{...(0,i.nv)(["getRealtimeStore","counterColorStore"]),...(0,i.OI)(["setDataRealtime"])}};const Sd=(0,_e.Z)(kd,[["render",Dd]]);var Ud=Sd;function Rd(e,t,a,s,i,n){const l=(0,q.up)("statistic-table");return(0,q.wg)(),(0,q.j4)(l,{statisticData:i.statisticData},null,8,["statisticData"])}var Md={name:"SolarStatisticTable",components:{StatisticTable:vr},data(){return{statisticData:{isError:!1,error:null,isLoading:!0,routeName:"",dataItems:[]}}},computed:{...(0,i.Se)(["getSolarStatistic"]),getDataItems(){return this.statisticData.dataItems=this.getSolarStatistic}},watch:{getDataItems(){}},created(){document.title="Solar Statistic";const e=this.$route.name;this.statisticData.routeName=e,this.getStatisticStore(e).then((e=>{this.statisticData.dataItems=e,this.statisticData.isLoading=!1})).catch((e=>{this.statisticData.isLoading=!1,this.statisticData.isError=!0,this.statisticData.error=e.message}))},methods:{...(0,i.nv)(["getStatisticStore"])}};const Pd=(0,_e.Z)(Md,[["render",Rd]]);var Cd=Pd;const xd={class:"text-xxl-center fw-bold"},Id=(0,q._)("span",null,"Chào mừng bạn đến Website giám sát hệ thống của Ban điều hành hệ thống IFC.",-1),Nd=(0,q._)("br",null,null,-1),Ad={key:0,class:"text-red"},Ld={key:1};function Td(e,t,a,s,i,n){return(0,q.wg)(),(0,q.iD)("div",xd,[Id,Nd,n.isUserAcc?((0,q.wg)(),(0,q.iD)("span",Ad,"Bạn không có quyền để xem một số tính năng quan trọng của website. Vui lòng liên hệ quản trị viên.")):((0,q.wg)(),(0,q.iD)("span",Ld,"Hãy chọn chức năng bên trái"))])}var Ed=a(6486),Fd={name:"Default",components:{SideNav:os},data(){return{user:null}},computed:{...(0,i.Se)(["getUser"]),isUserAcc(){return this.user=this.getUser,"user"==(0,Ed.lowerCase)(this.user.role)}}};const Bd=(0,_e.Z)(Fd,[["render",Td]]);var Od=Bd;const Wd={class:"container-fluid p-2"},qd={key:0,class:"text-center mt-5"},zd=(0,q._)("div",{class:"spinner-border",role:"status"},[(0,q._)("span",{class:"visually-hidden"},"Loading...")],-1),Zd=[zd],Vd={key:1},jd={class:"card mb-4"},$d={key:0,class:"text-center"},Hd={key:1,class:"card-body"},Kd={class:"dataTable-wrapper dataTable-loading no-footer sortable searchable fixed-columns"},Yd=(0,q._)("div",{class:"dataTable-top"},null,-1),Gd={class:"table-wrapper"},Jd={class:"table table-striped table-hover"},Xd=(0,q._)("thead",null,[(0,q._)("tr",null,[(0,q._)("th",null,"#"),(0,q._)("th",null,"Permission"),(0,q._)("th",null,"Action")])],-1),Qd={href:"#",class:"ms-2 text-danger",title:"Delete","data-toggle":"tooltip"},ec=["id"],tc={class:"d-grid gap-2 d-md-flex justify-content-md-end"};function ac(e,t,a,s,i,n){const l=(0,q.up)("modal-add-permission"),r=(0,q.up)("modal-delete-permission");return(0,q.wg)(),(0,q.iD)("main",null,[(0,q._)("div",Wd,[i.isLoading?((0,q.wg)(),(0,q.iD)("div",qd,Zd)):((0,q.wg)(),(0,q.iD)("div",Vd,[(0,q._)("div",jd,[e.isError?((0,q.wg)(),(0,q.iD)("p",$d,"Đã có lỗi xảy ra: "+(0,ye.zw)(e.error)+". Vui lòng liên hệ quản trị viên!",1)):((0,q.wg)(),(0,q.iD)("div",Hd,[(0,q._)("div",Kd,[Yd,(0,q._)("div",Gd,[(0,q._)("table",Jd,[Xd,(0,q._)("tbody",null,[((0,q.wg)(!0),(0,q.iD)(q.HY,null,(0,q.Ko)(e.getPermissions,((e,a)=>((0,q.wg)(),(0,q.iD)("tr",{key:a},[(0,q._)("td",null,(0,ye.zw)(a),1),(0,q._)("td",null,(0,ye.zw)(e.name),1),(0,q._)("td",null,[(0,q._)("a",Qd,[(0,q._)("i",{id:a,onClick:t[0]||(t[0]=(...e)=>n.deletePermission&&n.deletePermission(...e)),class:"fas fa-user-times"},null,8,ec)])])])))),128))])])])])]))]),(0,q._)("div",tc,[(0,q._)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>n.addPermission&&n.addPermission(...e))},"Add Permission")])]))]),(0,q.Wm)(l),(0,q.Wm)(r,{modal:i.modal},null,8,["modal"])])}const sc={ref:"modal",class:"modal fade",id:"addPermissionModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ic={class:"modal-dialog"},nc={class:"modal-content"},lc=(0,q._)("div",{class:"modal-header"},[(0,q._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Adding Permission Name")],-1),rc={class:"modal-body"},oc={class:"form-floating mb-3"},dc=(0,q._)("label",{for:"inputPermissionnameModal"},"Input Permission",-1),cc={class:"modal-footer"},uc=(0,q._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Không",-1),mc=["disabled"],hc={key:1,class:"btn btn-primary",type:"button",disabled:""},gc=(0,q._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),pc=(0,q.Uk)(" Chờ tí... "),bc=[gc,pc];function vc(e,t,a,i,n,l){return(0,q.wg)(),(0,q.iD)("div",sc,[(0,q._)("div",ic,[(0,q._)("div",nc,[lc,(0,q._)("div",rc,[(0,q._)("div",oc,[(0,q.wy)((0,q._)("input",{onInput:t[0]||(t[0]=(...e)=>l.clearAlert&&l.clearAlert(...e)),name:"permission",class:"form-control",id:"inputPermissionModal",type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>n.permissionName=e)},null,544),[[s.nr,n.permissionName]]),dc])]),n.isMessage?((0,q.wg)(),(0,q.iD)("div",{key:0,class:(0,ye.C_)("alert mx-3 alert-"+n.type),role:"alert"},(0,ye.zw)(n.message),3)):(0,q.kq)("",!0),(0,q._)("div",cc,[uc,n.isUpdated?((0,q.wg)(),(0,q.iD)("button",{key:0,type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>l.addPermission&&l.addPermission(...e)),disabled:n.isDisabled},"Thêm",8,mc)):((0,q.wg)(),(0,q.iD)("button",hc,bc))])])])],512)}var _c={name:"ModalAddPermission",data(){return{Role:{},isUpdated:!0,isMessage:!1,message:"",type:"",permissionName:"",isDisabled:!1}},props:["modal"],methods:{...(0,i.OI)(["insertPermission"]),clearAlert(){this.isMessage=!1},addPermission(){const e=this.permissionName;zr.createPermission(e).then((e=>{const t=e.data;this.isMessage=!0,this.type="success",this.message="Thêm Permission thành công",this.insertPermission({id:t.id,name:t.name}),this.isDisabled=!0})).catch((e=>{this.isMessage=!0,this.type="danger",this.message=e}))}}};const fc=(0,_e.Z)(_c,[["render",vc]]);var wc=fc;const yc={ref:"modal",class:"modal fade",id:"deletePermissionModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Dc={class:"modal-dialog"},kc={class:"modal-content"},Sc=(0,q._)("div",{class:"modal-header"},[(0,q._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Delete Permission")],-1),Uc={class:"modal-body"},Rc=(0,q._)("span",null,"Vui lòng nhập mật khẩu xác nhận",-1),Mc={class:"form-floating mb-3"},Pc=(0,q._)("label",{for:"inputPermissionnameModal"},"password",-1),Cc={class:"modal-footer"},xc=(0,q._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Không",-1),Ic=["disabled"],Nc={key:1,class:"btn btn-primary",type:"button",disabled:""},Ac=(0,q._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),Lc=(0,q.Uk)(" Chờ tí... "),Tc=[Ac,Lc];function Ec(e,t,a,i,n,l){return(0,q.wg)(),(0,q.iD)("div",yc,[(0,q._)("div",Dc,[(0,q._)("div",kc,[Sc,(0,q._)("div",Uc,[Rc,(0,q._)("div",Mc,[(0,q.wy)((0,q._)("input",{onInput:t[0]||(t[0]=(...e)=>l.clearAlert&&l.clearAlert(...e)),name:"password",class:"form-control",id:"inputPasswordModal",type:"pasword","onUpdate:modelValue":t[1]||(t[1]=e=>n.password=e)},null,544),[[s.nr,n.password]]),Pc])]),n.isMessage?((0,q.wg)(),(0,q.iD)("div",{key:0,class:(0,ye.C_)("alert mx-3 alert-"+n.type),role:"alert"},(0,ye.zw)(n.message),3)):(0,q.kq)("",!0),(0,q._)("div",Cc,[xc,n.isUpdated?((0,q.wg)(),(0,q.iD)("button",{key:0,type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>l.deletePermission&&l.deletePermission(...e)),disabled:n.isDisabled},"Xóa Role",8,Ic)):((0,q.wg)(),(0,q.iD)("button",Nc,Tc))])])])],512)}var Fc={name:"ModalDeletePermission",data(){return{Role:{},isUpdated:!0,isMessage:!1,message:"",type:"",password:"",isDisabled:!1}},props:["modal"],computed:{...(0,i.Se)(["getPermissions"])},methods:{...(0,i.OI)(["setPermissions"]),clearAlert(){this.isMessage=!1},deletePermission(){const e=this.modal.data.id,t=this.password;if("bdh!@#123"===t){const t=this.getPermissions,a=t[e].id;Ve["delete"](a).then((()=>{const e=t.filter((e=>e.id!=a));this.setPermissions(e),this.isMessage=!0,this.type="success",this.message="Đã xóa Permission thành công"})).catch((e=>{this.isMessage=!0,this.type="danger",this.message=e.message}))}else this.isMessage=!0,this.type="danger",this.message="Mật khẩu không đúng"}}};const Bc=(0,_e.Z)(Fc,[["render",Ec]]);var Oc=Bc,Wc={name:"ManagerPermission",components:{ModalAddPermission:wc,ModalDeletePermission:Oc},data(){return{isLoading:!0,modal:{name:"",data:{},isError:!1,error:null}}},computed:{...(0,i.Se)(["getPermissions"])},created(){document.title="Permission Manager",zr.getAllPermissions().then((e=>{const t=e.data.map((e=>({id:e.id,name:e.name})));this.setPermissions(t),this.isLoading=!1,this.isError=!1})).catch((e=>{this.isLoading=!1,this.isError=!0,this.error=e.message}))},methods:{...(0,i.OI)(["setPermissions"]),addPermission(){var e=new bootstrap.Modal(document.getElementById("addPermissionModal"));this.modal.name=e,e.show()},deletePermission(e){var t=new bootstrap.Modal(document.getElementById("deletePermissionModal"));this.modal.name=t,this.modal.data={id:e.target.id},t.show()}}};const qc=(0,_e.Z)(Wc,[["render",ac]]);var zc=qc;const Zc={class:"container-fluid p-2"},Vc={key:0,class:"text-center mt-5"},jc=(0,q._)("div",{class:"spinner-border",role:"status"},[(0,q._)("span",{class:"visually-hidden"},"Loading...")],-1),$c=[jc],Hc={key:1,class:"card mb-4"},Kc={class:"card-body"},Yc={class:"dataTable-wrapper dataTable-loading no-footer sortable searchable fixed-columns"},Gc=(0,q._)("div",{class:"dataTable-top"},null,-1),Jc={class:"table-wrapper"},Xc={class:"table table-striped table-hover"},Qc=(0,q._)("thead",null,[(0,q._)("tr",null,[(0,q._)("th",null,"#"),(0,q._)("th",null,"Name"),(0,q._)("th",null,"Action")])],-1),eu=["id"],tu={class:"d-grid gap-2 d-md-flex justify-content-md-end"};function au(e,t,a,s,i,n){const l=(0,q.up)("modal-add-role"),r=(0,q.up)("modal-delete-role");return(0,q.wg)(),(0,q.iD)("main",null,[(0,q._)("div",Zc,[i.isLoading?((0,q.wg)(),(0,q.iD)("div",Vc,$c)):((0,q.wg)(),(0,q.iD)("div",Hc,[(0,q._)("div",Kc,[(0,q._)("div",Yc,[Gc,(0,q._)("div",Jc,[(0,q._)("table",Xc,[Qc,(0,q._)("tbody",null,[((0,q.wg)(!0),(0,q.iD)(q.HY,null,(0,q.Ko)(e.getRoles,((e,a)=>((0,q.wg)(),(0,q.iD)("tr",{key:a},[(0,q._)("td",null,(0,ye.zw)(a),1),(0,q._)("td",null,(0,ye.zw)(e.name),1),(0,q._)("td",null,[(0,q._)("a",{href:"#",class:(0,ye.C_)("ms-2 text-danger "+n.addDisabledClass(e.name)),title:"Delete","data-toggle":"tooltip"},[(0,q._)("i",{id:e.id,onClick:t[0]||(t[0]=(...e)=>n.deleteRole&&n.deleteRole(...e)),class:"fas fa-user-times"},null,8,eu)],2)])])))),128))])])])])])])),(0,q._)("div",tu,[(0,q._)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>n.addRole&&n.addRole(...e))},"Add Role")])]),(0,q.Wm)(l,{"aria-modal":"modal"}),(0,q.Wm)(r,{modal:i.modal},null,8,["modal"])])}const su={ref:"modal",class:"modal fade",id:"addRoleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},iu={class:"modal-dialog"},nu={class:"modal-content"},lu=(0,q._)("div",{class:"modal-header"},[(0,q._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Add Role")],-1),ru={class:"modal-body"},ou={class:"row justify-content-center mb-2"},du={class:"col-md-6"},cu=(0,q._)("span",null,"Role Name",-1),uu={class:"modal-footer"},mu=(0,q._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Không",-1),hu=["disabled"],gu={key:1,class:"btn btn-primary",type:"button",disabled:""},pu=(0,q._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),bu=(0,q.Uk)(" Chờ tí... "),vu=[pu,bu];function _u(e,t,a,i,n,l){return(0,q.wg)(),(0,q.iD)("div",su,[(0,q._)("div",iu,[(0,q._)("div",nu,[lu,(0,q._)("div",ru,[(0,q._)("div",ou,[(0,q._)("div",du,[cu,(0,q.wy)((0,q._)("input",{onInput:t[0]||(t[0]=(...e)=>l.clearAlert&&l.clearAlert(...e)),placeholder:"exp: user",class:"form-control",id:"inputRolenameModal",type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>n.rolename=e)},null,544),[[s.nr,n.rolename]])])])]),n.isMessage?((0,q.wg)(),(0,q.iD)("div",{key:0,class:(0,ye.C_)("alert mx-3 alert-"+e.type),role:"alert"},(0,ye.zw)(n.message),3)):(0,q.kq)("",!0),(0,q._)("div",uu,[mu,n.isAdded?((0,q.wg)(),(0,q.iD)("button",{key:0,type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>l.addRole&&l.addRole(...e)),disabled:n.isDisabled},"Thêm",8,hu)):((0,q.wg)(),(0,q.iD)("button",gu,vu))])])])],512)}var fu={name:"ModalDeleteUser",data(){return{user:{},isAdded:!0,isMessage:!1,message:"",isDisabled:!0,permissions:[],rolename:null,permissionName:""}},props:["modal"],computed:{...(0,i.Se)(["getPermissions","getPermissionDetails"])},updated(){},methods:{...(0,i.OI)(["insertRole"]),clearAlert(){this.rolename.length>0?(this.isMessage=!1,this.isDisabled=!1):this.isDisabled=!0},addRole(){document.getElementsByName("permission_select").forEach((e=>{this.permissions.push({name:e.id,value:e.value})})),zr.createRole(this.rolename).then((e=>{this.insertRole(e.data),this.isMessage=!0,this.type="success",this.message="Thêm Role thành công",this.isDisabled=!0})).catch((e=>{this.isMessage=!0,this.type="danger",this.message="Thất bại trong quá trình tương tác với DB"}))}},mounted(){}};const wu=(0,_e.Z)(fu,[["render",_u]]);var yu=wu;const Du={ref:"modal",class:"modal fade",id:"deleteRoleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ku={class:"modal-dialog"},Su={class:"modal-content"},Uu=(0,q._)("div",{class:"modal-header"},[(0,q._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Role Removing")],-1),Ru={class:"modal-body"},Mu=(0,q._)("span",null,"Vui lòng nhập mật khẩu xác nhận",-1),Pu={class:"form-floating mb-3"},Cu=(0,q._)("label",{for:"inputRolenameModal"},"password",-1),xu={class:"modal-footer"},Iu=(0,q._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Không",-1),Nu=["disabled"],Au={key:1,class:"btn btn-primary",type:"button",disabled:""},Lu=(0,q._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),Tu=(0,q.Uk)(" Chờ tí... "),Eu=[Lu,Tu];function Fu(e,t,a,i,n,l){return(0,q.wg)(),(0,q.iD)("div",Du,[(0,q._)("div",ku,[(0,q._)("div",Su,[Uu,(0,q._)("div",Ru,[Mu,(0,q._)("div",Pu,[(0,q.wy)((0,q._)("input",{onInput:t[0]||(t[0]=(...e)=>l.clearAlert&&l.clearAlert(...e)),name:"password",class:"form-control",id:"inputPasswordModal",type:"pasword","onUpdate:modelValue":t[1]||(t[1]=e=>n.password=e)},null,544),[[s.nr,n.password]]),Cu])]),n.isMessage?((0,q.wg)(),(0,q.iD)("div",{key:0,class:(0,ye.C_)("alert mx-3 alert-"+n.type),role:"alert"},(0,ye.zw)(n.message),3)):(0,q.kq)("",!0),(0,q._)("div",xu,[Iu,n.isUpdated?((0,q.wg)(),(0,q.iD)("button",{key:0,type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>l.deleteRole&&l.deleteRole(...e)),disabled:n.isDisabled},"Xóa Role",8,Nu)):((0,q.wg)(),(0,q.iD)("button",Au,Eu))])])])],512)}var Bu={name:"ModalDeleteRole",data(){return{Role:{},isUpdated:!0,isMessage:!1,message:"",type:"",password:"",isDisabled:!1}},props:["modal"],methods:{...(0,i.nv)(["deleteRoleManager"]),clearAlert(){this.isMessage=!1},deleteRole(){const e=this.modal.data.id,t=this.password;"bdh!@#123"===t?zr.deleteRole(e).then((()=>{this.isMessage=!0,this.type="success",this.message="Xóa Role thành công",this.deleteRoleManager(e),this.isDisabled=!0})).catch((()=>{this.isMessage=!0,this.type="danger",this.message="Thất bại trong quá trình tương tác với DB"})):(this.isMessage=!0,this.type="danger",this.message="Mật khẩu không đúng")}}};const Ou=(0,_e.Z)(Bu,[["render",Fu]]);var Wu=Ou,qu={name:"ManagerRole",components:{ModalAddRole:yu,ModalDeleteRole:Wu,ModalSettingRole:_d},data(){return{isLoading:!0,modal:{name:"",data:{}}}},computed:{...(0,i.Se)(["getUser","getPermissions","getRoles","getPermissionDetails"])},created(){document.title="Role Manager",0==this.getRoles.length?zr.getAllRoles().then((e=>{this.isLoading=!1;const t=e.data.map((e=>({id:e.id,name:e.name})));this.setRoles(t)})).catch((e=>console.log(e))):this.isLoading=!1},methods:{...(0,i.OI)(["setPermissions","setRoles","setPermissionDetails"]),addDisabledClass(e){const t=this.getUser,a=t.username;return"manager"==e&&"thamtc.ifc"!=a?"disabled":""},addRole(){var e=new bootstrap.Modal(document.getElementById("addRoleModal"));this.modal.name=e,e.show()},convertIdToName(e){return y.idToName(e?.value??0)},deleteRole(e){const t=e.target.id;var a=new bootstrap.Modal(document.getElementById("deleteRoleModal"));this.modal.name=a,this.modal.data={id:t},a.show()}}};const zu=(0,_e.Z)(qu,[["render",au]]);var Zu=zu;const Vu={class:"container-fluid p-2"},ju={class:"d-flex"},$u={class:"fw-bold flex-grow-1"},Hu=(0,q._)("i",{class:"far fa-edit text-orange"},null,-1),Ku=(0,q.Uk)("Update"),Yu=[Hu,Ku],Gu=(0,q._)("hr",null,null,-1),Ju={class:"card my-1 bg-yellow"},Xu={class:"card-body"},Qu={class:"dataTable-wrapper dataTable-loading no-footer sortable searchable fixed-columns"},em={class:"d-flex"},tm=(0,q._)("div",null,[(0,q._)("img",{src:"/assets/images/monitor.png",alt:"Avatar",class:"d-block ui-w-80"})],-1),am={class:"flex-grow-1 mx-3"},sm={class:"subject"},im={class:"author"},nm=(0,q.uE)('<div class="small"><nav style="--bs-breadcrumb-divider:&#39;|&#39;;" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="#" class="text-decoration-none">Previous</a></li><li class="breadcrumb-item active" aria-current="page">Next</li></ol></nav></div>',1),lm={class:"table table-borderless table-sm mt-3"},rm=(0,q._)("th",null,"Status:",-1),om=(0,q._)("th",null,"Start Date:",-1),dm=(0,q._)("th",null,"Priority:",-1),cm=(0,q._)("th",null,"Due Date:",-1),um=(0,q._)("th",null,"Assignee:",-1),mm=(0,q._)("th",null,"% Done:",-1),hm={class:"progress w-25"},gm=(0,q._)("hr",null,null,-1),pm=(0,q._)("span",{class:"fw-bold"},"Description",-1),bm=(0,q._)("br",null,null,-1),vm={class:"mx-3"},_m=(0,q._)("div",{id:"editor"},null,-1);function fm(e,t,a,s,i,n){const l=(0,q.up)("c-k-editor-vue"),r=(0,q.up)("modal-update-issue");return(0,q.wg)(),(0,q.iD)("main",null,[(0,q._)("div",Vu,[(0,q._)("div",ju,[(0,q._)("span",$u,"Issue#"+(0,ye.zw)(i.issue.id),1),(0,q._)("a",{href:"#",onClick:t[0]||(t[0]=(...e)=>n.updateIssue&&n.updateIssue(...e)),class:"text-decoration-none text-primary"},Yu)]),Gu,(0,q._)("div",Ju,[(0,q._)("div",Xu,[(0,q._)("div",Qu,[(0,q._)("div",em,[tm,(0,q._)("div",am,[(0,q._)("div",sm,(0,ye.zw)(i.issue.subject),1),(0,q._)("div",im,"Added By "+(0,ye.zw)(i.issue.addedBy),1)]),nm]),(0,q._)("table",lm,[(0,q._)("tbody",null,[(0,q._)("tr",null,[rm,(0,q._)("td",null,(0,ye.zw)(i.issue.status),1),om,(0,q._)("td",null,(0,ye.zw)(i.issue.startDate),1)]),(0,q._)("tr",null,[dm,(0,q._)("td",null,(0,ye.zw)(i.issue.priority),1),cm,(0,q._)("td",null,(0,ye.zw)(i.issue.dueDate),1)]),(0,q._)("tr",null,[um,(0,q._)("td",null,(0,ye.zw)(i.issue.assignee),1),mm,(0,q._)("td",null,[(0,q._)("div",hm,[(0,q._)("div",{class:"progress-bar bg-success",role:"progressbar",style:(0,ye.j5)("width: "+i.issue.doneProgress+"%"),"aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"},(0,ye.zw)(i.issue.doneProgress)+"%",5)])])])])]),gm,pm,bm,(0,q._)("span",vm,(0,ye.zw)(i.issue.description),1),_m])])]),(0,q.Wm)(l,{onEditorSubmit:n.handleEditor,editorProp:i.editorData},null,8,["onEditorSubmit","editorProp"])]),(0,q.Wm)(r,{modal:i.modal},null,8,["modal"])])}const wm={ref:"modal",class:"modal fade",id:"updateIssueModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ym={class:"modal-dialog"},Dm={class:"modal-content"},km=(0,q._)("div",{class:"modal-header"},[(0,q._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Adding Issue")],-1),Sm={class:"modal-body"},Um={class:"row"},Rm={class:"col-md-6"},Mm=(0,q._)("span",null,"Status",-1),Pm=["value","selected"],Cm={class:"col-md-6"},xm=(0,q._)("span",null,"% Done",-1),Im=["value","selected"],Nm={class:"row"},Am={class:"col-md-6"},Lm=(0,q._)("span",null,"Added by",-1),Tm={class:"col-md-6"},Em=(0,q._)("span",null,"Assignee",-1),Fm={name:"",id:"assignee_select",class:"form-control"},Bm=["value","selected"],Om={class:"row mb-3"},Wm={class:"col-md-6"},qm=(0,q._)("span",null,"Start Date",-1),zm={class:"input-group date",id:"datepicker"},Zm={class:"col-md-6"},Vm=(0,q._)("span",null,"Due Date",-1),jm={class:"input-group date",id:"datepicker"},$m={class:"modal-footer"},Hm=(0,q._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Thoát",-1),Km=["disabled"],Ym={key:1,class:"btn btn-primary",type:"button",disabled:""},Gm=(0,q._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),Jm=(0,q.Uk)(" Chờ tí... "),Xm=[Gm,Jm];function Qm(e,t,a,i,n,l){return(0,q.wg)(),(0,q.iD)("div",wm,[(0,q._)("div",ym,[(0,q._)("div",Dm,[km,(0,q._)("div",Sm,[(0,q._)("div",Um,[(0,q._)("div",Rm,[Mm,(0,q.wy)((0,q._)("select",{name:"",id:"status_select-update",class:"form-select",onChange:t[0]||(t[0]=(...e)=>l.changeStatus&&l.changeStatus(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>n.statusSelection_Ud=e)},[((0,q.wg)(!0),(0,q.iD)(q.HY,null,(0,q.Ko)(n.optionStatus,((e,t)=>((0,q.wg)(),(0,q.iD)("option",{value:e,key:t,selected:e==l.getIssue.status},(0,ye.zw)(e),9,Pm)))),128))],544),[[s.bM,n.statusSelection_Ud]])]),(0,q._)("div",Cm,[xm,(0,q.wy)((0,q._)("select",{name:"",id:"progress_select-update",class:"form-select",onChange:t[2]||(t[2]=(...e)=>l.changeProgress&&l.changeProgress(...e)),"onUpdate:modelValue":t[3]||(t[3]=e=>n.progressSelection_Ud=e)},[((0,q.wg)(!0),(0,q.iD)(q.HY,null,(0,q.Ko)(n.optionDone,((e,t)=>((0,q.wg)(),(0,q.iD)("option",{value:e,key:t,selected:e==l.getIssue.doneProgress},(0,ye.zw)(e)+"%",9,Im)))),128))],544),[[s.bM,n.progressSelection_Ud]])])]),(0,q._)("div",Nm,[(0,q._)("div",Am,[Lm,(0,q.wy)((0,q._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=e=>n.issueFormData.addedBy=e),disabled:""},null,512),[[s.nr,n.issueFormData.addedBy]])]),(0,q._)("div",Tm,[Em,(0,q._)("select",Fm,[((0,q.wg)(!0),(0,q.iD)(q.HY,null,(0,q.Ko)(l.getUsers,((e,t)=>((0,q.wg)(),(0,q.iD)("option",{value:e.name,key:t,selected:e.name==l.getIssue.assignee},(0,ye.zw)(e.name),9,Bm)))),128))])])]),(0,q._)("div",Om,[(0,q._)("div",Wm,[qm,(0,q._)("div",zm,[(0,q.wy)((0,q._)("input",{type:"date",class:"form-control",id:"startdate","onUpdate:modelValue":t[5]||(t[5]=e=>n.issueFormData.startDate=e)},null,512),[[s.nr,n.issueFormData.startDate]])])]),(0,q._)("div",Zm,[Vm,(0,q._)("div",jm,[(0,q.wy)((0,q._)("input",{type:"date",class:"form-control",id:"duedate","onUpdate:modelValue":t[6]||(t[6]=e=>n.issueFormData.dueDate=e)},null,512),[[s.nr,n.issueFormData.dueDate]])])])]),n.isMessage?((0,q.wg)(),(0,q.iD)("div",{key:0,class:(0,ye.C_)("text-center alert mt-3 alert-"+n.type),role:"alert"},(0,ye.zw)(n.message),3)):(0,q.kq)("",!0),(0,q._)("div",$m,[Hm,n.isAdded?((0,q.wg)(),(0,q.iD)("button",{key:0,type:"submit",class:"btn btn-primary",disabled:n.isDisabled,onClick:t[7]||(t[7]=(...e)=>l.updateIssue&&l.updateIssue(...e))},"Update",8,Km)):((0,q.wg)(),(0,q.iD)("button",Ym,Xm))])])])])],512)}var eh={name:"ModalUpdateIssue",data(){return{isAdded:!0,isMessage:!1,message:null,type:null,isDisabled:!1,optionStatus:["New","To Do","In Progress","Review","Done"],optionDone:[0,10,20,30,40,50,60,70,80,90,100],issueFormData:{},statusSelection_Ud:null,progressSelection_Ud:null}},props:["modal"],computed:{getUsers(){return this.modal.users},getIssue(){return this.statusSelection_Ud=this.modal.data.status,this.progressSelection_Ud=this.modal.data.doneProgress,this.issueFormData=this.modal.data}},watch:{getIssue(){}},methods:{changeStatus(){const e=this.statusSelection_Ud;e===this.optionStatus[0]&&(this.progressSelection_Ud=this.optionDone[0]),e===this.optionStatus[2]&&(this.progressSelection_Ud=this.optionDone[1]),e===this.optionStatus[3]&&(this.progressSelection_Ud=this.optionDone[8]),e===this.optionStatus[4]&&(this.progressSelection_Ud=this.optionDone[10])},changeProgress(){const e=this.progressSelection_Ud;e===this.optionDone[0]&&(this.statusSelection_Ud=this.optionStatus[0]),e>=this.optionDone[1]&&(this.statusSelection_Ud=this.optionStatus[2]),e>=this.optionDone[8]&&(this.statusSelection_Ud=this.optionStatus[3]),e===this.optionDone[10]&&(this.statusSelection_Ud=this.optionStatus[4])},updateIssue(){const e=6e4*(new Date).getTimezoneOffset(),t=new Date(Date.now()-e).toISOString(),a=document.getElementById("assignee_select").value,s={status:this.statusSelection_Ud,doneProgress:this.progressSelection_Ud,assignee:a,startDate:this.issueFormData.startDate+(new Date).toISOString().slice(10),dueDate:this.issueFormData.dueDate+"T23:59:00",updatedAt:t};this.isAdded=!1,zr.updateIssue(this.issueFormData.id,s).then((e=>{this.issueFormData.status=s.status,this.issueFormData.doneProgress=s.doneProgress,this.issueFormData.assignee=s.assignee,this.issueFormData.startDate=s.startDate.slice(0,10),this.issueFormData.dueDate=s.dueDate.slice(0,10),this.isMessage=!0,this.isAdded=!0,this.type="success",this.message="Thêm issue thành công!"})).catch((e=>{this.isAdded=!1,this.isMessage=!0,this.type="danger",this.message=e.response}))}}};const th=(0,_e.Z)(eh,[["render",Qm]]);var ah=th;const sh={key:1,class:"btn btn-primary mt-2",type:"button",disabled:""},ih=(0,q._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),nh=(0,q.Uk)(" Chờ tí... "),lh=[ih,nh];function rh(e,t,a,s,i,n){const l=(0,q.up)("ckeditor");return(0,q.wg)(),(0,q.iD)("div",null,[(0,q.Wm)(l,{editor:i.editor,modelValue:i.editorData,"onUpdate:modelValue":t[0]||(t[0]=e=>i.editorData=e),config:i.editorConfig},null,8,["editor","modelValue","config"]),i.isSubmit?((0,q.wg)(),(0,q.iD)("button",{key:0,class:"btn btn-primary mt-2",onClick:t[1]||(t[1]=(...e)=>n.submitDescr&&n.submitDescr(...e))},"Submit")):((0,q.wg)(),(0,q.iD)("button",sh,lh))])}var oh=a(5234),dh=a.n(oh),ch={name:"CKEditor",data(){return{editor:dh(),editorData:"<p>Content of the editor.</p>",editorConfig:{},isSubmit:!0}},props:["editorProp"],methods:{...(0,i.nv)(["createDescription"]),submitDescr(){console.log(this.editorProp.id);const e={issueId:this.editorProp.id,content:this.editorData};this.createDescription(e).then((e=>{console.log(e.data)})).catch((e=>{console.log(e)})),this.$emit("editor-submit",this.editorData)}}};const uh=(0,_e.Z)(ch,[["render",rh]]);var mh=uh,hh={name:"IssueDetail",components:{ModalUpdateIssue:ah,CKEditorVue:mh},data(){return{editorData:{},issue:{},modal:{name:null,data:{}},editorDataProp:null}},computed:{...(0,i.Se)(["getIssues","getManagerUsers"])},created(){const e=this.$route.params,t=e.id,a=this.getIssues;a.length?(this.issue=a.find((e=>e.id==t)),this.issue.startDate=this.issue?.startDate.slice(0,10)??"",this.issue.dueDate=this.issue?.dueDate.slice(0,10)??"",this.issue.id=t,this.editorData.id=t,this.indexDescription(t).then((e=>{const t=[]=e.data;t.forEach((e=>{const t=document.getElementById("editor");t.innerHTML+=`<div class="desc-content mb-2">${e.content}</div>`}))})).catch((e=>console.log(e)))):zr.getIssueIndex(t).then((e=>(this.issue=e.data,this.editorData.id=e.data.id,this.issue.startDate=this.issue.startDate.slice(0,10),this.issue.dueDate=this.issue.dueDate.slice(0,10),this.indexDescription(e.data.id)))).then((e=>{const t=[]=e.data;return t.forEach((e=>{const t=document.getElementById("editor");t.innerHTML+=`<div class="desc-content mb-2">${e.content}</div>`})),zr.getAllUsers()})).then((e=>{this.setManagerUsers(e.data)})).catch((e=>console.log(e)))},methods:{...(0,i.OI)(["setManagerUsers"]),...(0,i.nv)(["indexDescription"]),mapUsers(){return this.getManagerUsers.map((e=>({id:e.id,name:e.username})))},updateIssue(){var e=new bootstrap.Modal(document.getElementById("updateIssueModal"));this.modal.name="",this.issue.dueDate=this.issue.dueDate.slice(0,10),this.issue.startDate=this.issue.startDate.slice(0,10),this.modal.data=this.issue,this.modal.users=this.mapUsers(),e.show()},handleEditor(e){const t=document.getElementById("editor");t.innerHTML+=`<div class="desc-content mb-2">${e}</div>`}}};const gh=(0,_e.Z)(hh,[["render",fm]]);var ph=gh;const bh={class:"container-fluid p-2"},vh={class:"card mb-2"},_h={key:0,class:"text-center"},fh={class:"card-body"},wh={class:"dataTable-wrapper dataTable-loading no-footer sortable searchable fixed-columns"},yh={class:"d-flex mb-3 justify-content-end"},Dh=(0,q._)("span",null,"Status:",-1),kh=["value"],Sh=(0,q._)("span",null,"User:",-1),Uh=(0,q._)("option",{value:"All"},"All",-1),Rh=["value"],Mh=(0,q._)("span",null,"From:",-1),Ph={class:"date",id:"fromdatepicker"},Ch=(0,q._)("span",{class:"ms-1"},"To:",-1),xh={class:"date",id:"todatepicker"},Ih={key:0,class:"text-center mt-5"},Nh=(0,q._)("div",{class:"spinner-border",role:"status"},[(0,q._)("span",{class:"visually-hidden"},"Loading...")],-1),Ah=[Nh],Lh={key:1,class:"table-wrapper"},Th={class:"table-ifc table-light table-hover",id:"dataTable",width:"100%",cellspacing:"0"},Eh=(0,q._)("thead",null,[(0,q._)("tr",{id:"0",class:"text-center"},[(0,q._)("th",{style:{width:"5%"}},"#"),(0,q._)("th",{style:{width:"7%"}},"Status"),(0,q._)("th",{style:{width:"68%"}},"Subject"),(0,q._)("th",{style:{width:"8%"}},"%Done"),(0,q._)("th",{style:{width:"12%"}},"Updateded")])],-1),Fh={style:{width:"5%"}},Bh={style:{width:"7%"}},Oh={style:{width:"68%"},class:"text-start"},Wh={style:{width:"8%"}},qh={class:"progress"},zh={style:{width:"12%"}},Zh={class:"text-center mt-3"},Vh={class:"page-container"},jh=["disabled"],$h=(0,q._)("i",{class:"fas fa-angle-double-left"},null,-1),Hh=[$h],Kh=["disabled"],Yh=(0,q._)("i",{class:"fas fa-angle-left"},null,-1),Gh=[Yh],Jh={id:"pagination"},Xh=["data-page"],Qh={class:"pg-link",href:"#"},eg=["disabled"],tg=(0,q._)("i",{class:"fas fa-angle-right"},null,-1),ag=[tg],sg=["disabled"],ig=(0,q._)("i",{class:"fas fa-angle-double-right"},null,-1),ng=[ig],lg={class:"d-grid gap-2 d-md-flex justify-content-md-end"};function rg(e,t,a,i,n,l){const r=(0,q.up)("router-link"),o=(0,q.up)("modal-add-issue");return(0,q.wg)(),(0,q.iD)("main",null,[(0,q._)("div",bh,[(0,q._)("div",null,[(0,q._)("div",vh,[n.isError?((0,q.wg)(),(0,q.iD)("p",_h," Đã có lỗi xảy ra: "+(0,ye.zw)(n.error)+". ",1)):(0,q.kq)("",!0),(0,q._)("div",fh,[(0,q._)("div",wh,[(0,q._)("div",yh,[Dh,(0,q.wy)((0,q._)("select",{onChange:t[0]||(t[0]=(...e)=>l.changeStatus&&l.changeStatus(...e)),name:"",class:"me-3","onUpdate:modelValue":t[1]||(t[1]=e=>n.statusSelection=e)},[((0,q.wg)(!0),(0,q.iD)(q.HY,null,(0,q.Ko)(n.statusOptions,((e,t)=>((0,q.wg)(),(0,q.iD)("option",{value:e,key:t},(0,ye.zw)(e),9,kh)))),128))],544),[[s.bM,n.statusSelection]]),Sh,l.isCanShow?(0,q.wy)(((0,q.wg)(),(0,q.iD)("select",{key:0,onChange:t[2]||(t[2]=(...e)=>l.changeUser&&l.changeUser(...e)),name:"",class:"me-3","onUpdate:modelValue":t[3]||(t[3]=e=>n.userSelection=e)},[Uh,((0,q.wg)(!0),(0,q.iD)(q.HY,null,(0,q.Ko)(n.users,((e,t)=>((0,q.wg)(),(0,q.iD)("option",{value:e.name,key:t},(0,ye.zw)(e.name),9,Rh)))),128))],544)),[[s.bM,n.userSelection]]):(0,q.kq)("",!0),Mh,(0,q._)("div",Ph,[(0,q.wy)((0,q._)("input",{onChange:t[4]||(t[4]=(...e)=>l.changeDate&&l.changeDate(...e)),type:"date",class:"",id:"fromdatefilter","onUpdate:modelValue":t[5]||(t[5]=e=>n.fromDateSelection=e)},null,544),[[s.nr,n.fromDateSelection]])]),Ch,(0,q._)("div",xh,[(0,q.wy)((0,q._)("input",{onChange:t[6]||(t[6]=(...e)=>l.changeDate&&l.changeDate(...e)),type:"date",class:"",id:"todatefilter","onUpdate:modelValue":t[7]||(t[7]=e=>n.toDateSelection=e)},null,544),[[s.nr,n.toDateSelection]])])]),n.isLoading?((0,q.wg)(),(0,q.iD)("div",Ih,Ah)):((0,q.wg)(),(0,q.iD)("div",Lh,[(0,q._)("table",Th,[Eh,(0,q._)("tbody",null,[((0,q.wg)(!0),(0,q.iD)(q.HY,null,(0,q.Ko)(l.dataItems,((e,t)=>((0,q.wg)(),(0,q.iD)("tr",{key:t,class:"text-center"},[(0,q._)("td",Fh,[(0,q.Wm)(r,{to:{name:"issue_detail",params:{id:e.id}},class:"text-decoration-none"},{default:(0,q.w5)((()=>[(0,q.Uk)((0,ye.zw)(e.id),1)])),_:2},1032,["to"])]),(0,q._)("td",Bh,(0,ye.zw)(e.status),1),(0,q._)("td",Oh,[(0,q.Wm)(r,{to:{name:"issue_detail",params:{id:e.id}},class:"text-decoration-none"},{default:(0,q.w5)((()=>[(0,q.Uk)((0,ye.zw)(e.subject),1)])),_:2},1032,["to"])]),(0,q._)("td",Wh,[(0,q._)("div",qh,[(0,q._)("div",{class:(0,ye.C_)("progress-bar bg-"+l.bg_colordone(e.dueDate,e.status)),role:"progressbar",style:(0,ye.j5)("width: "+e.doneProgress+"%"),"aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"},(0,ye.zw)(e.doneProgress)+"% ",7)])]),(0,q._)("td",zh,(0,ye.zw)(l.formatDate(e.updatedAt)),1)])))),128))])])])),(0,q._)("div",Zh,[(0,q._)("div",Vh,[(0,q._)("button",{onClick:t[8]||(t[8]=(...e)=>l.firstPage&&l.firstPage(...e)),class:"first-page",disabled:n.isPrev},Hh,8,jh),(0,q._)("button",{onClick:t[9]||(t[9]=(...e)=>l.prePage&&l.prePage(...e)),class:"prev-page",disabled:n.isPrev},Gh,8,Kh),(0,q._)("div",Jh,[((0,q.wg)(!0),(0,q.iD)(q.HY,null,(0,q.Ko)(n.elePaginations,((e,a)=>((0,q.wg)(),(0,q.iD)("li",{class:(0,ye.C_)("pg-item "+e.active),"data-page":e.index,key:a,onClick:t[10]||(t[10]=(...e)=>l.choosePage&&l.choosePage(...e))},[(0,q._)("a",Qh,(0,ye.zw)(e.index),1)],10,Xh)))),128))]),(0,q._)("button",{onClick:t[11]||(t[11]=(...e)=>l.nextPage&&l.nextPage(...e)),class:"next-page",disabled:n.isNext},ag,8,eg),(0,q._)("button",{onClick:t[12]||(t[12]=(...e)=>l.lastPage&&l.lastPage(...e)),class:"last-page",disabled:n.isNext},ng,8,sg)])])])])]),(0,q._)("div",lg,[(0,q._)("button",{type:"button",class:"btn btn-primary",onClick:t[13]||(t[13]=(...e)=>l.addIssue&&l.addIssue(...e))}," Add Task ")])])]),(0,q.Wm)(o,{modal:n.modal},null,8,["modal"])])}const og={ref:"modal",class:"modal fade",id:"addIssueModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},dg={class:"modal-dialog"},cg={class:"modal-content"},ug=(0,q._)("div",{class:"modal-header"},[(0,q._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Adding Issue")],-1),mg={class:"modal-body"},hg={class:"row"},gg={class:"col-md-6"},pg=(0,q._)("span",null,"Status",-1),bg={name:"",id:"status_select",class:"form-select"},vg=["value","selected"],_g={class:"col-md-6"},fg=(0,q._)("span",null,"% Done",-1),wg={name:"",id:"done_select",class:"form-select"},yg=["value","selected"],Dg={class:"form-group"},kg=(0,q._)("span",null,"Subject",-1),Sg={class:"form-group"},Ug=(0,q._)("label",{for:"descriptionArea"},"Description",-1),Rg={class:"row"},Mg={class:"col-md-6"},Pg=(0,q._)("span",null,"Added by",-1),Cg={class:"col-md-6"},xg=(0,q._)("span",null,"Assignee",-1),Ig={name:"",id:"assignee_select",class:"form-control"},Ng=["value","selected"],Ag={class:"row"},Lg={class:"col-md-6"},Tg=(0,q._)("span",null,"Start Date",-1),Eg={class:"input-group date",id:"datepicker"},Fg={class:"col-md-6"},Bg=(0,q._)("span",null,"Due Date",-1),Og={class:"input-group date",id:"datepicker"},Wg={class:"modal-footer"},qg=(0,q._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Không",-1),zg=["disabled"],Zg={key:1,class:"btn btn-primary",type:"button",disabled:""},Vg=(0,q._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),jg=(0,q.Uk)(" Chờ tí... "),$g=[Vg,jg];function Hg(e,t,a,i,n,l){const r=(0,q.up)("Field"),o=(0,q.up)("ErrorMessage"),d=(0,q.up)("Form");return(0,q.wg)(),(0,q.iD)("div",og,[(0,q._)("div",dg,[(0,q._)("div",cg,[ug,(0,q._)("div",mg,[(0,q.Wm)(d,{action:"",onSubmit:l.addIssue,method:"post","validation-schema":n.schema},{default:(0,q.w5)((()=>[(0,q._)("div",hg,[(0,q._)("div",gg,[pg,(0,q._)("select",bg,[((0,q.wg)(!0),(0,q.iD)(q.HY,null,(0,q.Ko)(n.optionStatus,((e,t)=>((0,q.wg)(),(0,q.iD)("option",{value:e,key:t,selected:0==t},(0,ye.zw)(e),9,vg)))),128))])]),(0,q._)("div",_g,[fg,(0,q._)("select",wg,[((0,q.wg)(!0),(0,q.iD)(q.HY,null,(0,q.Ko)(n.optionDone,((e,t)=>((0,q.wg)(),(0,q.iD)("option",{value:e,key:t,selected:0==t},(0,ye.zw)(e)+"%",9,yg)))),128))])])]),(0,q._)("div",Dg,[kg,(0,q.Wm)(r,{name:"subject",type:"text",class:"form-control",modelValue:n.issueFormData.subject,"onUpdate:modelValue":t[0]||(t[0]=e=>n.issueFormData.subject=e)},null,8,["modelValue"])]),(0,q.Wm)(o,{name:"subject",class:"help-message mt-2"}),(0,q._)("div",Sg,[Ug,(0,q.Wm)(r,{class:"form-control",id:"descriptionArea",rows:"3",modelValue:n.issueFormData.description,"onUpdate:modelValue":t[1]||(t[1]=e=>n.issueFormData.description=e),name:"description"},null,8,["modelValue"])]),(0,q.Wm)(o,{name:"description",class:"help-message mt-2"}),(0,q._)("div",Rg,[(0,q._)("div",Mg,[Pg,(0,q.wy)((0,q._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>n.issueFormData.addedBy=e),disabled:""},null,512),[[s.nr,n.issueFormData.addedBy]])]),(0,q._)("div",Cg,[xg,(0,q._)("select",Ig,[((0,q.wg)(!0),(0,q.iD)(q.HY,null,(0,q.Ko)(l.getUsers,((e,t)=>((0,q.wg)(),(0,q.iD)("option",{value:e.name,key:t,selected:e.name==l.getAuthName},(0,ye.zw)(e.name),9,Ng)))),128))])])]),(0,q._)("div",Ag,[(0,q._)("div",Lg,[Tg,(0,q._)("div",Eg,[(0,q.wy)((0,q._)("input",{type:"date",class:"form-control",id:"startdate","onUpdate:modelValue":t[3]||(t[3]=e=>n.issueFormData.startDate=e)},null,512),[[s.nr,n.issueFormData.startDate]])])]),(0,q._)("div",Fg,[Bg,(0,q._)("div",Og,[(0,q.wy)((0,q._)("input",{type:"date",class:"form-control",id:"duedate","onUpdate:modelValue":t[4]||(t[4]=e=>n.issueFormData.dueDate=e)},null,512),[[s.nr,n.issueFormData.dueDate]])])])]),n.isMessage?((0,q.wg)(),(0,q.iD)("div",{key:0,class:(0,ye.C_)("text-center alert mt-3 alert-"+n.type),role:"alert"},(0,ye.zw)(n.message),3)):(0,q.kq)("",!0),(0,q._)("div",Wg,[qg,n.isAdded?((0,q.wg)(),(0,q.iD)("button",{key:0,type:"submit",class:"btn btn-primary",disabled:n.isDisabled},"Thêm",8,zg)):((0,q.wg)(),(0,q.iD)("button",Zg,$g))])])),_:1},8,["onSubmit","validation-schema"])])])])],512)}var Kg={name:"ModalAddIssue",components:{Form:ii.l0,Field:ii.gN,ErrorMessage:ii.Bc},data(){const e=ni.Ry({subject:ni.Z_().required("Không được để trống!").nullable().min(6,"Nhập tối thiếu 6 ký tự"),description:ni.Z_().required("Không được để trống!").nullable().min(6,"Nhập tối thiếu 6 ký tự")});return{schema:e,isAdded:!0,isMessage:!1,message:null,type:null,isDisabled:!1,optionStatus:["New","To Do","In Progress","Review","Done"],optionDone:[0,10,20,30,40,50,60,70,80,90,100],issueFormData:{subject:null,description:null,addedBy:null,startDate:null,dueDate:null}}},props:["modal"],computed:{getUsers(){return this.modal.users},getAuthName(){return this.issueFormData.addedBy=this.modal.authName}},watch:{getAuthName(){}},created(){const e=6e4*(new Date).getTimezoneOffset(),t=new Date(Date.now()-e).toISOString(),a=t.slice(0,10);this.issueFormData.startDate=a,this.issueFormData.dueDate=a},methods:{...(0,i.OI)(["insertIssue"]),addIssue(){const e=6e4*(new Date).getTimezoneOffset(),t=new Date(Date.now()-e).toISOString(),a=document.getElementById("status_select").value,s=document.getElementById("done_select").value,i=document.getElementById("assignee_select").value,n={projectId:0,status:a,subject:this.issueFormData.subject,description:this.issueFormData.description,priority:0,doneProgress:s,addedBy:this.issueFormData.addedBy,assignee:i,startDate:this.issueFormData.startDate+t.slice(10),dueDate:this.issueFormData.dueDate+"T23:59:00",updatedAt:t};this.isAdded=!1,zr.createIssue(n).then((e=>{this.insertIssue(e.data),this.isMessage=!0,this.isAdded=!0,this.type="success",this.message="Thêm issue thành công!"})).catch((e=>{this.isAdded=!0,this.isMessage=!0,this.type="danger",this.message=e.response.data}))}}};const Yg=(0,_e.Z)(Kg,[["render",Hg]]);var Gg=Yg;function Jg(e){return e.toString().padStart(2,"0")}const Xg={formatDate:e=>{const t=new Date(e);return[t.getFullYear(),Jg(t.getMonth()+1),Jg(t.getDate())].join("-")+" "+[Jg(t.getHours()),Jg(t.getMinutes())].join(":")}};var Qg=Xg;const ep={pagination:(e=1,t=1)=>{const a=1,s=a+4;let i=[],n=[],l={active:"",index:"..."},r=0;const o=t-a,d=t+a;let c="";for(let u=1;u<=e;u++)c=u===t?"active":"",e>=2*s-1?o>3&&d<e-3+1?u>=o&&u<=d&&n.push(tp(u,c)):t<s&&u<=s||t>e-s&&u>=e-s+1||u===e||1===u?i.push(tp(u,c)):(r++,1===r&&i.push(l)):i.push(tp(u,c));return n.length?(n=[tp(1),l,...n,l,tp(e)],n):i}};function tp(e,t=""){return{active:t,index:e}}var ap=ep,sp={components:{ModalAddIssue:Gg},name:"Issue",data(){return{isLoading:!1,isError:!1,error:null,modal:{name:null,authName:null,users:[]},userSelection:"All",fromDateSelection:null,toDateSelection:null,users:[],elePaginations:[],isPrev:!0,isNext:!1,curPage:1,totalPage:10,oldPage:1,statusOptions:["All","New","To Do","In Progress","Review","Done"],statusSelection:"All"}},computed:{...(0,i.Se)(["getIssues","getManagerUsers","getUser"]),dataItems(){return this.getIssues},isCanShow(){const e=this.getUser;return"manager"===e.role}},created(){const e=6e4*(new Date).getTimezoneOffset(),t=new Date(Date.now()-e),a=new Date,s=new Date(a);s.setDate(s.getDate()-7);const i=s.toISOString();this.fromDateSelection=i.slice(0,10),this.toDateSelection=t.toISOString().slice(0,10),this.isLoading=!0;const n=localStorage.getItem("accessToken");this.user=n?(0,u.Z)(n):this.getUser,this.userSelection="manager"===this.user.role?"All":this.user.username;const l={where:{status:this.statusSelection,assignee:this.userSelection,startDate:i.slice(0,10)+"T00:00:00",endDate:t.toISOString()},offset:1,limit:10};zr.getAllUsers().then((e=>(this.setManagerUsers(e.data),this.users=e.data.map((e=>({id:e.id,name:e.username}))),this.getCounterIssue(l.where)))).then((e=>{const t=e.data,a=Math.floor(t/10);return this.totalPage=t%10>0?a+1:a,this.elePaginations=ap.pagination(this.totalPage,this.curPage),this.handleButtonLeft(),this.handleButtonRight(),this.getAllIssue(l)})).then((e=>{this.setIssues(e.data),this.isLoading=!1})).catch((e=>{this.isLoading=!1,this.isError=!0,this.error=e}))},methods:{...(0,i.OI)(["setIssues","setManagerUsers"]),...(0,i.nv)(["getAllIssue","getCounterIssue"]),bg_colordone(e=Date.now(),t="Done"){const a=new Date(e).getTime(),s=new Date(Date.now()).getTime();return"Done"!==t&&a<s?"danger":"success"},addIssue(){var e=new bootstrap.Modal(document.getElementById("addIssueModal"));this.modal.name="",this.modal.authName=this.getUser.username,this.modal.users=this.users,localStorage.setItem("issueDetail",JSON.stringify(this.modal)),e.show()},formatDate(e){return Qg.formatDate(e)},firstPage(){this.isNext=!1,this.isPrev=!0,this.curPage=1,this.requestIssue(this.curPage)},prePage(){this.isNext=!1,this.curPage--,this.handleButtonLeft(),this.requestIssue(this.curPage)},nextPage(){this.isPrev=!1,this.curPage++,this.handleButtonRight(),this.requestIssue(this.curPage)},lastPage(){this.isNext=!0,this.isPrev=!1,this.curPage=this.totalPage,this.requestIssue(this.curPage)},handleButtonLeft(){this.curPage<=1?(this.curPage=1,this.isPrev=!0,this.isPrev=!0):(this.isPrev=!1,this.isPrev=!1)},handleButtonRight(){this.curPage>=this.totalPage?(this.curPage=this.totalPage,this.isNext=!0,this.isNext=!0):(this.isNext=!1,this.isNext=!1)},choosePage(e){const t=e.target;if(t.dataset.page){const t=parseInt(e.target.dataset.page,10);isNaN(t)||t!=this.oldPage&&(this.oldPage=t,this.curPage=t,this.handleButtonLeft(),this.handleButtonRight(),this.requestIssue(t))}},changeStatus(){this.requestIssue()},changeUser(){this.requestIssue()},changeDate(){this.requestIssue()},requestIssue(e=1,t=10){this.isError=!1;const a=this.statusSelection,s=this.userSelection,i=6e4*(new Date).getTimezoneOffset(),n=new Date(Date.now()-i).toISOString();if(this.fromDateSelection<=this.toDateSelection){const i={where:{status:a,assignee:s,startDate:this.fromDateSelection+"T00:00:00.000Z",endDate:this.toDateSelection+n.slice(10)},offset:e,limit:t};this.isLoading=!0,this.getCounterIssue(i.where).then((t=>{const a=t.data,s=Math.floor(a/10);return this.totalPage=a%10>0?s+1:s,this.curPage=e,this.handleButtonRight(),this.elePaginations=ap.pagination(this.totalPage,this.curPage),this.getAllIssue(i)})).then((e=>{this.isLoading=!1,this.setIssues(e.data)})).catch((e=>{this.isLoading=!1,this.isError=!0,this.error=e}))}else this.isError=!0,this.error="Ngày bắt đầu phải nhỏ hơn hoặc bằng ngày kết thúc"}}};const ip=(0,_e.Z)(sp,[["render",rg]]);var np=ip;function lp(e,t,a,s,i,n){const l=(0,q.up)("router-view");return(0,q.wg)(),(0,q.j4)(l)}var rp={name:"Redmine"};const op=(0,_e.Z)(rp,[["render",lp]]);var dp=op;function cp(e,t,a,s,i,n){const l=(0,q.up)("real-time-table");return(0,q.wg)(),(0,q.j4)(l,{realtimeData:i.realtimeData},null,8,["realtimeData"])}var up={name:"BMBRealTimeTable",components:{RealTimeTable:bl},data(){return{realtimeData:{isError:!1,error:null,isLoading:!0,routeName:"",countColors:[],dataItems:[],currentData:{}}}},computed:{...(0,i.Se)(["getBmbRealtime","getCountColorBmbs","getCurrentBmb"]),countColors(){return this.realtimeData.countColors=this.getCountColorBmbs},dataItems(){return this.realtimeData.dataItems=this.getBmbRealtime},currentData(){return this.realtimeData.currentData=this.getCurrentBmb}},watch:{countColors(){},dataItems(){},currentData(){}},async created(){document.title="BMB_Realtime",this.realtimeData.routeName=this.$route.name,this.getRealtimeStore(this.realtimeData.routeName).then((e=>{""==e&&(e=[]),this.setDataRealtime({key:"bmb_realtime",data:e}),this.counterColorStore(this.realtimeData.routeName),this.realtimeData.currentData=this.getCurrentBmb,this.realtimeData.isLoading=!1})).catch((e=>{this.realtimeData.isLoading=!1,this.realtimeData.isError=!0,this.realtimeData.error=e.message}))},methods:{...(0,i.nv)(["getRealtimeStore","counterColorStore"]),...(0,i.OI)(["setDataRealtime"])}};const mp=(0,_e.Z)(up,[["render",cp]]);var hp=mp;function gp(e,t,a,s,i,n){return(0,q.wg)(),(0,q.iD)("span",null,"Redmine Statistic")}var pp={name:"RedmineStatistic"};const bp=(0,_e.Z)(pp,[["render",gp]]);var vp=bp,_p=[{path:"default",name:"default",component:Od},{path:"realtime",name:"realtime",component:fl},{path:"statistic",name:"statistic",component:wr},{path:"managerUser",name:"managerUser",component:yd},{path:"managerRole",name:"managerRole",component:Zu},{path:"managerPermission",name:"managerPermission",component:zc},{path:"solar/realtime",name:"solar_realtime",component:Ud},{path:"solar/statistic",name:"solar_statistic",component:Cd},{path:"redmine/issues",name:"redmine_issues",component:dp,children:[{path:"",name:"issue",component:np},{path:":id",name:"issue_detail",component:ph}]},{path:"redmine/statistic",name:"redmine_statistic",component:vp},{path:"bmb_room/realtime",name:"bmb_realtime",component:hp}];const fp={class:"container-fluid p-2"},wp={class:"card p-3"},yp={class:"d-flex align-items-center"},Dp=["src"],kp={class:"media-body mx-3"},Sp=(0,q._)("button",{type:"button",class:"btn btn-default md-btn-flat"},"Reset",-1),Up=(0,q._)("div",{class:"text-light small mt-1"},"Allowed JPG, GIF or PNG. Max size of 800K",-1),Rp=(0,q.uE)('<hr class="border-light my-2"><div class="form-group"><label class="form-label">Username</label><input type="text" class="form-control mb-1" value="" placeholder="admin.ifc"></div><div class="form-group"><label class="form-label">Name</label><input type="text" class="form-control" value="" placeholder="admin"></div><div class="form-group"><label class="form-label">E-mail</label><input type="text" class="form-control mb-1" value="" placeholder="admin.ifc@gmail.com"><div class="alert alert-warning mt-3"> Your email is not confirmed. Please check your inbox.<br><a href="javascript:void(0)">Resend confirmation</a></div></div><div class="form-group"><label class="form-label">Company</label><input type="text" class="form-control" value="" placeholder="IFC"></div>',5);function Mp(e,t,a,s,i,n){return(0,q.wg)(),(0,q.iD)("main",null,[(0,q._)("div",fp,[(0,q._)("div",wp,[(0,q._)("div",yp,[(0,q._)("img",{src:i.src,alt:"Avatar",class:"d-block ui-w-80"},null,8,Dp),(0,q._)("div",kp,[(0,q._)("input",{type:"file",class:"account-settings-fileinput",onChange:t[0]||(t[0]=(...e)=>n.onFileSelected&&n.onFileSelected(...e)),ref:"fileInput"},null,544),(0,q._)("button",{onClick:t[1]||(t[1]=t=>e.$refs.fileInput.click()),type:"button",class:"btn btn-primary me-3"},"Pick File"),Sp,Up])]),Rp])])])}var Pp={name:"General",data(){return{selectedFile:null,src:null,user:null,fileName:null}},computed:{...(0,i.Se)(["getUser"])},created(){this.user=this.getUser,this.fileName=this.user.username,this.src=`/assets/images/${this.fileName}.png`},methods:{onFileSelected(e){let t=new FileReader;t.readAsDataURL(e.target.files[0]),t.onload=e=>{this.src=e.target.result}}}};const Cp=(0,_e.Z)(Pp,[["render",Mp]]);var xp=Cp;const Ip={class:"container-fluid p-2 d-flex justify-content-center"},Np={class:"card p-3 min-width"},Ap=(0,q._)("h5",{class:"mb-3 m-auto"},"Change Password",-1),Lp={class:"form-group"},Tp=(0,q._)("label",{class:"form-label"},"Old Password",-1),Ep={class:"form-group"},Fp=(0,q._)("label",{class:"form-label"},"New Password",-1),Bp={class:"form-group"},Op=(0,q._)("label",{class:"form-label"},"New Password Confirmation",-1),Wp={class:"text-end"},qp={key:0,type:"submit",class:"btn btn-primary col-3"},zp={key:1,class:"btn btn-primary",type:"button",disabled:""},Zp=(0,q._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),Vp=(0,q.Uk)(" Chờ tí... "),jp=[Zp,Vp];function $p(e,t,a,s,i,n){const l=(0,q.up)("Field"),r=(0,q.up)("ErrorMessage"),o=(0,q.up)("Form");return(0,q.wg)(),(0,q.iD)("main",null,[(0,q._)("div",Ip,[(0,q._)("div",Np,[Ap,(0,q.Wm)(o,{action:"",onSubmit:n.submit,method:"post","validation-schema":i.schema},{default:(0,q.w5)((()=>[(0,q._)("div",Lp,[Tp,(0,q.Wm)(l,{name:"password",type:"password",class:"form-control mb-2",modelValue:i.oldPassword,"onUpdate:modelValue":t[0]||(t[0]=e=>i.oldPassword=e)},null,8,["modelValue"])]),(0,q.Wm)(r,{name:"password",class:"help-message"}),(0,q._)("div",Ep,[Fp,(0,q.Wm)(l,{name:"newPassword",onInput:n.clearAlert,type:"password",class:"form-control mb-2",modelValue:i.newPassword,"onUpdate:modelValue":t[1]||(t[1]=e=>i.newPassword=e)},null,8,["onInput","modelValue"])]),(0,q.Wm)(r,{name:"newPassword",class:"help-message"}),(0,q._)("div",Bp,[Op,(0,q.Wm)(l,{name:"passwordConfirmation",onInput:n.clearAlert,type:"password",class:"form-control mb-3",modelValue:i.passwordConfrimation,"onUpdate:modelValue":t[2]||(t[2]=e=>i.passwordConfrimation=e)},null,8,["onInput","modelValue"])]),(0,q.Wm)(r,{name:"passwordConfirmation",class:"help-message"}),i.isMessage?((0,q.wg)(),(0,q.iD)("div",{key:0,class:(0,ye.C_)("alert alert-"+i.type),role:"alert"},(0,ye.zw)(i.message),3)):(0,q.kq)("",!0),(0,q._)("div",Wp,[i.isChange?((0,q.wg)(),(0,q.iD)("button",qp,"Change")):((0,q.wg)(),(0,q.iD)("button",zp,jp))])])),_:1},8,["onSubmit","validation-schema"])])])])}var Hp={name:"ChangePassword",components:{Form:ii.l0,Field:ii.gN,ErrorMessage:ii.Bc},data(){const e=ni.Ry({password:ni.Z_().required("Không được để trống").min(6,"Mật khẩu tối thiểu 6 ký tự"),newPassword:ni.Z_().notOneOf([ni.iH("password"),null],"Không được giống mật khẩu cũ").min(6,"Mật khẩu tối thiểu 6 ký tự"),passwordConfirmation:ni.Z_().oneOf([ni.iH("newPassword"),null],"Mật khẩu không giống nhau")});return{schema:e,oldPassword:"",newPassword:"",passwordConfrimation:"",isMessage:!1,message:"",type:"",isChange:!0}},computed:{...(0,i.Se)(["getUser"])},methods:{...(0,i.OI)(["setUser","setIsLoggin"]),...(0,i.nv)(["signout"]),clearAlert(){this.isMessage=!1},showAlert(e,t){this.isMessage=!0,this.message=t,this.type=e},submit(){this.isChange=!1;const e=this.getUser,t=e.email;me.changePassword(t,this.oldPassword,this.newPassword).then((e=>{this.isChange=!0,this.showAlert("success",e.data),this.signout().then((()=>{setTimeout((()=>{this.setUser({}),this.setIsLoggin(!1),this.$router.push({name:"dashboard"})}),2e3)})).catch((e=>{this.isChange=!0,this.showAlert("danger",e.response.data)}))})).catch((e=>{this.isChange=!0,this.showAlert("danger",e.response.data)}))}}};const Kp=(0,_e.Z)(Hp,[["render",$p]]);var Yp=Kp;const Gp={class:"container-fluid p-2 d-flex justify-content-center"},Jp={class:"card p-3 min-width"},Xp=(0,q._)("h5",{class:"mb-3 m-auto"},"Request Role",-1),Qp=(0,q._)("span",null,"Select Role",-1),eb=["value"],tb=(0,q._)("span",null,"Enter content to send to Management",-1),ab={class:"text-center"},sb={key:1,class:"btn btn-primary",type:"button",disabled:""},ib=(0,q._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),nb=(0,q.Uk)(" Chờ tí... "),lb=[ib,nb];function rb(e,t,a,i,n,l){return(0,q.wg)(),(0,q.iD)("main",null,[(0,q._)("div",Gp,[(0,q._)("div",Jp,[Xp,(0,q._)("form",null,[Qp,(0,q.wy)((0,q._)("select",{onChange:t[0]||(t[0]=(...e)=>l.changeSelection&&l.changeSelection(...e)),class:"form-select mb-3","onUpdate:modelValue":t[1]||(t[1]=e=>n.selectionRole=e)},[((0,q.wg)(!0),(0,q.iD)(q.HY,null,(0,q.Ko)(e.getRoles,((e,t)=>((0,q.wg)(),(0,q.iD)("option",{class:"role",value:e,key:t},(0,ye.zw)(e),9,eb)))),128))],544),[[s.bM,n.selectionRole]]),tb,(0,q.wy)((0,q._)("textarea",{class:"form-control mb-3",placeholder:"exp: Xin chào! Tôi là User mới, xin được cấp quyền admin","onUpdate:modelValue":t[2]||(t[2]=e=>n.content=e)},null,512),[[s.nr,n.content]]),n.isMessage?((0,q.wg)(),(0,q.iD)("div",{key:0,class:(0,ye.C_)("alert alert-"+n.type),role:"alert"},(0,ye.zw)(n.message),3)):(0,q.kq)("",!0),(0,q._)("div",ab,[n.isRequest?((0,q.wg)(),(0,q.iD)("button",{key:0,type:"button",class:"btn btn-primary col-5",onClick:t[3]||(t[3]=(...e)=>l.submit&&l.submit(...e))},"Send Request")):((0,q.wg)(),(0,q.iD)("button",sb,lb))])])])])])}var ob={name:"RequestRole",components:{},data(){return{isMessage:!1,message:"",type:"",isRequest:!0,selectionRole:"",roles:[],content:""}},computed:{...(0,i.Se)(["getRoles","getUser"])},created(){zr.getAllRoles().then((e=>{e.data.forEach((e=>{this.roles.push(e.name)})),this.setRoles(this.roles)})).catch((e=>{this.isMessage=!0,this.message=e}))},methods:{...(0,i.OI)(["setRoles"]),changeSelection(){this.isMessage=!1},showAlert(e,t){this.isMessage=!0,this.message=t,this.type=e},submit(){if(this.selectionRole.length>0){this.isRequest=!1;const e=this.getUser,t=e.email;Br.requestRole(t,this.selectionRole,this.content).then((e=>{this.isRequest=!0,this.showAlert("success",e.data)})).catch((e=>{this.isRequest=!0,this.showAlert("danger",e)}))}else this.showAlert("danger","Bạn chưa chọn Role")}}};const db=(0,_e.Z)(ob,[["render",rb]]);var cb=db,ub=[{path:"general",name:"general",component:xp},{path:"change_password",name:"change_password",component:Yp},{path:"request_role",name:"request_role",component:cb}];const mb=[{path:"/",name:"home",components:{default:us,navbar:Ee},beforeEnter:xs,redirect:{name:"default"},children:_p},{path:"/dashboard",name:"dashboard",component:Cs},...gn,{path:"/account",name:"account",beforeEnter:xs,components:{default:_n,navbar:Ee},redirect:{name:"general"},children:ub},{path:"/:pathMatch(.*)*",component:Us}],hb=(0,it.p7)({routes:mb,history:(0,it.PO)(),linkExactActiveClass:"active"});var gb=hb,pb=a(2346),bb=a(760),vb=a.n(bb),_b=a(7671),fb=a(6123),wb=a.n(fb),yb=a(4e3),Db=a.n(yb);const kb=(0,s.ri)(st);kb.use(new(vb())({debug:!0,connection:(0,_b.io)("http://113.160.233.28:8000")})),kb.use(wb()),kb.use(pb.Z,d()),kb.use(gb),kb.use(W),kb.use(Db()),kb.mount("#app")}},t={};function a(s){var i=t[s];if(void 0!==i)return i.exports;var n=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=e,function(){a.amdO={}}(),function(){var e=[];a.O=function(t,s,i,n){if(!s){var l=1/0;for(c=0;c<e.length;c++){s=e[c][0],i=e[c][1],n=e[c][2];for(var r=!0,o=0;o<s.length;o++)(!1&n||l>=n)&&Object.keys(a.O).every((function(e){return a.O[e](s[o])}))?s.splice(o--,1):(r=!1,n<l&&(l=n));if(r){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[s,i,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var i,n,l=s[0],r=s[1],o=s[2],d=0;if(l.some((function(t){return 0!==e[t]}))){for(i in r)a.o(r,i)&&(a.m[i]=r[i]);if(o)var c=o(a)}for(t&&t(s);d<l.length;d++)n=l[d],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(c)},s=self["webpackChunkclient"]=self["webpackChunkclient"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(513)}));s=a.O(s)})();
//# sourceMappingURL=app.04d277e5.js.map